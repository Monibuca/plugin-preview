!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("path"),require("fs"),require("crypto")):"function"==typeof define&&define.amd?define(["path","fs","crypto"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).path,e.fs,e.crypto$1)}(this,function(e,t,r){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var kr=n(e),Sr=n(t),Ar=n(r),g=function(L){var U=L={exports:{}},g=void 0!==g?g:{},e=(g={print:function(e){console.log("Jessibuca: [worker]:",e)},printErr:function(e){console.warn("Jessibuca: [worker]:",e),postMessage({cmd:"wasmError",message:e})}},Object.assign({},g)),x="./this.program",B="object"==typeof window,u="function"==typeof importScripts,j="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,t=!B&&!j&&!u;if(g.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");var $,W,z,H,V,G,r="";if(j){if("object"!=typeof process)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");r=u?kr.default.dirname(r)+"/":__dirname+"/",G=()=>{V||(H=Sr.default,V=kr.default)},$=function(e,t){return G(),e=V.normalize(e),H.readFileSync(e,t?void 0:"utf8")},z=e=>{e=$(e,!0);return F((e=e.buffer?e:new Uint8Array(e)).buffer),e},W=(e,r,n)=>{G(),e=V.normalize(e),H.readFile(e,function(e,t){e?n(e):r(t.buffer)})},1<process.argv.length&&(x=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),U.exports=g,process.on("uncaughtException",function(e){if(!(e instanceof _r))throw e}),process.on("unhandledRejection",function(e){throw e}),g.inspect=function(){return"[Emscripten Module object]"}}else if(t){if("object"==typeof process||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");"undefined"!=typeof read&&($=function(e){return read(e)}),z=function(e){return"function"==typeof readbuffer?new Uint8Array(readbuffer(e)):(F("object"==typeof(e=read(e,"binary"))),e)},W=function(e,t,r){setTimeout(()=>t(z(e)),0)},"undefined"!=typeof print&&((console="undefined"==typeof console?{}:console).log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)}else{if(!B&&!u)throw new Error("environment detection error");if(u?r=self.location.href:"undefined"!=typeof document&&document.currentScript&&(r=document.currentScript.src),r=0!==r.indexOf("blob:")?r.substr(0,r.replace(/[?#].*/,"").lastIndexOf("/")+1):"","object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");$=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},u&&(z=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),W=(e,t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{200==n.status||0==n.status&&n.response?t(n.response):r()},n.onerror=r,n.send(null)}}var Y,X,q=g.print||console.log.bind(console),s=g.printErr||console.warn.bind(console);function y(e){y.shown||(y.shown={}),y.shown[e]||(y.shown[e]=1,s(e))}function n(e,t){Object.getOwnPropertyDescriptor(g,e)||Object.defineProperty(g,e,{configurable:!0,get:function(){h("Module."+e+" has been replaced with plain "+t+" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)")}})}function J(e,t){e="'"+e+"' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the FAQ)";return t&&(e+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),e}function K(e,t){Object.getOwnPropertyDescriptor(g,e)||Object.defineProperty(g,e,{configurable:!0,get:function(){h(J(e,t))}})}function o(e,t){Object.getOwnPropertyDescriptor(g,e)||(g[e]=()=>h(J(e,t)))}Object.assign(g,e),e="fetchSettings",Object.getOwnPropertyDescriptor(g,e)&&h("`Module."+e+"` was supplied but `"+e+"` not included in INCOMING_MODULE_JS_API"),g.arguments,n("arguments","arguments_"),g.thisProgram&&(x=g.thisProgram),n("thisProgram","thisProgram"),g.quit,n("quit","quit_"),F(void 0===g.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),F(void 0===g.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),F(void 0===g.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),F(void 0===g.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),F(void 0===g.read,"Module.read option was removed (modify read_ in JS)"),F(void 0===g.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),F(void 0===g.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),F(void 0===g.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),F(void 0===g.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),n("read","read_"),n("readAsync","readAsync"),n("readBinary","readBinary"),n("setWindowTitle","setWindowTitle"),F(!t,"shell environment detected but not enabled at build time.  Add 'shell' to `-sENVIRONMENT` to enable."),g.wasmBinary&&(Y=g.wasmBinary),n("wasmBinary","wasmBinary"),g.noExitRuntime,n("noExitRuntime","noExitRuntime"),"object"!=typeof WebAssembly&&h("no native wasm support detected");var Q=!1;function F(e,t){e||h("Assertion failed"+(t?": "+t:""))}var Z="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function i(e,t,r){for(var n=t+r,o=t;e[o]&&!(n<=o);)++o;if(16<o-t&&e.buffer&&Z)return Z.decode(e.subarray(t,o));for(var i="";t<o;){var a,s,l=e[t++];128&l?(a=63&e[t++],192!=(224&l)?(s=63&e[t++],(l=224==(240&l)?(15&l)<<12|a<<6|s:(240!=(248&l)&&y("Invalid UTF-8 leading byte 0x"+l.toString(16)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),(7&l)<<18|a<<12|s<<6|63&e[t++]))<65536?i+=String.fromCharCode(l):(s=l-65536,i+=String.fromCharCode(55296|s>>10,56320|1023&s))):i+=String.fromCharCode((31&l)<<6|a)):i+=String.fromCharCode(l)}return i}function ee(e,t){return e?i(M,e,t):""}function te(e,t,r,n){if(!(0<n))return 0;for(var o=r,i=r+n-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if((s=55296<=s&&s<=57343?65536+((1023&s)<<10)|1023&e.charCodeAt(++a):s)<=127){if(i<=r)break;t[r++]=s}else if(s<=2047){if(i<=r+1)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(i<=r+2)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(i<=r+3)break;1114111<s&&y("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-o}function re(e,t,r){F("number"==typeof r,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),te(e,M,t,r)}function ne(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);(n=55296<=n&&n<=57343?65536+((1023&n)<<10)|1023&e.charCodeAt(++r):n)<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}var oe,O,M,l,ie,R,f,ae,se,le="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function ue(e,t){F(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var r,n=e>>1,o=n+t/2;!(o<=n)&&ie[n];)++n;if(32<(r=n<<1)-e&&le)return le.decode(M.subarray(e,r));for(var i="",a=0;!(t/2<=a);++a){var s=l[e+2*a>>1];if(0==s)break;i+=String.fromCharCode(s)}return i}function ce(e,t,r){if(F(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),F("number"==typeof r,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),(r=void 0===r?2147483647:r)<2)return 0;for(var n=t,o=(r-=2)<2*e.length?r/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);l[t>>1]=a,t+=2}return l[t>>1]=0,t-n}function de(e){return 2*e.length}function fe(e,t){F(e%4==0,"Pointer passed to UTF32ToString must be aligned to four bytes!");for(var r=0,n="";!(t/4<=r);){var o,i=R[e+4*r>>2];if(0==i)break;++r,65536<=i?(o=i-65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o)):n+=String.fromCharCode(i)}return n}function pe(e,t,r){if(F(t%4==0,"Pointer passed to stringToUTF32 must be aligned to four bytes!"),F("number"==typeof r,"stringToUTF32(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),(r=void 0===r?2147483647:r)<4)return 0;for(var n=t,o=n+r-4,i=0;i<e.length;++i){var a=e.charCodeAt(i);if(55296<=a&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++i)),R[t>>2]=a,(t+=4)+4>o)break}return R[t>>2]=0,t-n}function he(e){for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);55296<=n&&n<=57343&&++r,t+=4}return t}function me(e){var t=ne(e)+1,r=pr(t);return r&&te(e,O,r,t),r}function ge(e){oe=e,g.HEAP8=O=new Int8Array(e),g.HEAP16=l=new Int16Array(e),g.HEAP32=R=new Int32Array(e),g.HEAPU8=M=new Uint8Array(e),g.HEAPU16=ie=new Uint16Array(e),g.HEAPU32=f=new Uint32Array(e),g.HEAPF32=ae=new Float32Array(e),g.HEAPF64=se=new Float64Array(e)}e=5242880;g.TOTAL_STACK&&F(e===g.TOTAL_STACK,"the stack size can no longer be determined at runtime");var ye,t=g.INITIAL_MEMORY||67108864;function ve(){var e=br();F(0==(3&e)),R[e>>2]=34821223,R[e+4>>2]=2310721022,R[0]=1668509029}function we(){var e,t;Q||(t=br(),e=f[t>>2],t=f[t+4>>2],34821223==e&&2310721022==t||h("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x2135467, but received 0x"+t.toString(16)+" 0x"+e.toString(16)),1668509029!==R[0]&&h("Runtime error: The application has corrupted its heap memory area (address zero)!"))}n("INITIAL_MEMORY","INITIAL_MEMORY"),F(e<=t,"INITIAL_MEMORY should be larger than TOTAL_STACK, was "+t+"! (TOTAL_STACK=5242880)"),F("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),F(!g.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),F(67108864==t,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)";var a,c,d,Ee=[],be=[],_e=[],Te=!1,p=(F(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),F(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),0),ke=null,Se=null,Ae={};function Ce(e){for(var t=e;;){if(!Ae[e])return e;e=t+Math.random()}}function Pe(e){p++,g.monitorRunDependencies&&g.monitorRunDependencies(p),e?(F(!Ae[e]),Ae[e]=1,null===ke&&"undefined"!=typeof setInterval&&(ke=setInterval(function(){if(Q)return clearInterval(ke),void(ke=null);var e,t=!1;for(e in Ae)t||(t=!0,s("still waiting on run dependencies:")),s("dependency: "+e);t&&s("(end of list)")},1e4))):s("warning: run dependency added without ID")}function De(e){p--,g.monitorRunDependencies&&g.monitorRunDependencies(p),e?(F(Ae[e]),delete Ae[e]):s("warning: run dependency removed without ID"),0==p&&(null!==ke&&(clearInterval(ke),ke=null),Se)&&(e=Se,Se=null,e())}function h(e){throw g.onAbort&&g.onAbort(e),s(e="Aborted("+e+")"),Q=!0,new WebAssembly.RuntimeError(e)}function Fe(e){return e.startsWith("data:application/octet-stream;base64,")}function Oe(e){return e.startsWith("file://")}function m(r,n){return function(){var e=r,t=n;return n||(t=g.asm),F(Te,"native function `"+e+"` called before runtime initialization"),t[r]||F(t[r],"exported native function `"+e+"` not found"),t[r].apply(null,arguments)}}function Me(e){try{if(e==a&&Y)return new Uint8Array(Y);if(z)return z(e);throw"both async and sync fetching of the wasm failed"}catch(e){h(e)}}function Re(e){for(;0<e.length;){var t,r=e.shift();"function"!=typeof r?"number"==typeof(t=r.func)?void 0===r.arg?Ie(t)():Ie(t)(r.arg):t(void 0===r.arg?null:r.arg):r(g)}}function Ne(e){return e.replace(/\b_Z[\w\d_]+/g,function(e){var t=e;return y("warning: build with -sDEMANGLE_SUPPORT to link in libcxxabi demangling"),e===t?e:t+" ["+e+"]"})}function Ie(e){return ye.get(e)}function Le(){var t=new Error;if(!t.stack){try{throw new Error}catch(e){t=e}if(!t.stack)return"(no stack trace available)"}return t.stack.toString()}Fe(a="decoder.wasm")||(a=function(e){return g.locateFile?g.locateFile(e,r):r+e}(a));var v={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},normalize:e=>{var t=v.isAbs(e),r="/"===e.substr(-1);return(e=(e=v.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/"))||t?e:".")&&r&&(e+="/"),(t?"/":"")+e},dirname:e=>{var e=v.splitPath(e),t=e[0],e=e[1];return t||e?t+(e=e&&e.substr(0,e.length-1)):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=v.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return v.normalize(e.join("/"))},join2:(e,t)=>v.normalize(e+"/"+t)},w={resolve:function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:b.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,t=v.isAbs(n)}return(t?"/":"")+v.normalizeArray(e.split("/").filter(e=>!!e),!t).join("/")||"."},relative:(e,t)=>{function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=w.resolve(e).substr(1),t=w.resolve(t).substr(1);for(var n=r(e.split("/")),o=r(t.split("/")),i=Math.min(n.length,o.length),a=i,s=0;s<i;s++)if(n[s]!==o[s]){a=s;break}for(var l=[],s=a;s<n.length;s++)l.push("..");return(l=l.concat(o.slice(a))).join("/")}},Ue={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Ue.ttys[e]={input:[],output:[],ops:t},b.registerDevice(e,Ue.stream_ops)},stream_ops:{open:function(e){var t=Ue.ttys[e.node.rdev];if(!t)throw new b.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.get_char)throw new b.ErrnoError(60);for(var i,a=0,s=0;s<n;s++){try{i=e.tty.ops.get_char(e.tty)}catch(e){throw new b.ErrnoError(29)}if(void 0===i&&0===a)throw new b.ErrnoError(6);if(null==i)break;a++,t[r+s]=i}return a&&(e.node.timestamp=Date.now()),a},write:function(e,t,r,n,o){if(!e.tty||!e.tty.ops.put_char)throw new b.ErrnoError(60);try{for(var i=0;i<n;i++)e.tty.ops.put_char(e.tty,t[r+i])}catch(e){throw new b.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if(j){var r=Buffer.alloc(256),n=0;try{n=H.readSync(process.stdin.fd,r,0,256,-1)}catch(e){if(!e.toString().includes("EOF"))throw e;n=0}t=0<n?r.slice(0,n).toString("utf-8"):null}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n");if(!t)return null;e.input=ur(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(q(i(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(q(i(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(s(i(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},flush:function(e){e.output&&0<e.output.length&&(s(i(e.output,0)),e.output=[])}}};function xe(e){t=e,F(65536,"alignment argument is required"),e=65536*Math.ceil(t/65536);var t=vr(65536,e);return t?(e=e,M.fill(0,t,t+e),t):0}var E={ops_table:null,mount:function(e){return E.createNode(null,"/",16895,0)},createNode:function(e,t,r,n){if(b.isBlkdev(r)||b.isFIFO(r))throw new b.ErrnoError(63);E.ops_table||(E.ops_table={dir:{node:{getattr:E.node_ops.getattr,setattr:E.node_ops.setattr,lookup:E.node_ops.lookup,mknod:E.node_ops.mknod,rename:E.node_ops.rename,unlink:E.node_ops.unlink,rmdir:E.node_ops.rmdir,readdir:E.node_ops.readdir,symlink:E.node_ops.symlink},stream:{llseek:E.stream_ops.llseek}},file:{node:{getattr:E.node_ops.getattr,setattr:E.node_ops.setattr},stream:{llseek:E.stream_ops.llseek,read:E.stream_ops.read,write:E.stream_ops.write,allocate:E.stream_ops.allocate,mmap:E.stream_ops.mmap,msync:E.stream_ops.msync}},link:{node:{getattr:E.node_ops.getattr,setattr:E.node_ops.setattr,readlink:E.node_ops.readlink},stream:{}},chrdev:{node:{getattr:E.node_ops.getattr,setattr:E.node_ops.setattr},stream:b.chrdev_stream_ops}});r=b.createNode(e,t,r,n);return b.isDir(r.mode)?(r.node_ops=E.ops_table.dir.node,r.stream_ops=E.ops_table.dir.stream,r.contents={}):b.isFile(r.mode)?(r.node_ops=E.ops_table.file.node,r.stream_ops=E.ops_table.file.stream,r.usedBytes=0,r.contents=null):b.isLink(r.mode)?(r.node_ops=E.ops_table.link.node,r.stream_ops=E.ops_table.link.stream):b.isChrdev(r.mode)&&(r.node_ops=E.ops_table.chrdev.node,r.stream_ops=E.ops_table.chrdev.stream),r.timestamp=Date.now(),e&&(e.contents[t]=r,e.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){var r=e.contents?e.contents.length:0;t<=r||(t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256)),r=e.contents,e.contents=new Uint8Array(t),0<e.usedBytes&&e.contents.set(r.subarray(0,e.usedBytes),0))},resizeFileStorage:function(e,t){var r;e.usedBytes!=t&&(0==t?(e.contents=null,e.usedBytes=0):(r=e.contents,e.contents=new Uint8Array(t),r&&e.contents.set(r.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t))},node_ops:{getattr:function(e){var t={};return t.dev=b.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,b.isDir(e.mode)?t.size=4096:b.isFile(e.mode)?t.size=e.usedBytes:b.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&E.resizeFileStorage(e,t.size)},lookup:function(e,t){throw b.genericErrors[44]},mknod:function(e,t,r,n){return E.createNode(e,t,r,n)},rename:function(e,t,r){if(b.isDir(e.mode)){var n;try{n=b.lookupNode(t,r)}catch(e){}if(n)for(var o in n.contents)throw new b.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=r,t.contents[r]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){for(var r in b.lookupNode(e,t).contents)throw new b.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t,r=[".",".."];for(t in e.contents)e.contents.hasOwnProperty(t)&&r.push(t);return r},symlink:function(e,t,r){e=E.createNode(e,t,41471,0);return e.link=r,e},readlink:function(e){if(b.isLink(e.mode))return e.link;throw new b.ErrnoError(28)}},stream_ops:{read:function(e,t,r,n,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,n);if(F(0<=a),8<a&&i.subarray)t.set(i.subarray(o,o+a),r);else for(var s=0;s<a;s++)t[r+s]=i[o+s];return a},write:function(e,t,r,n,o,i){if(F(!(t instanceof ArrayBuffer)),t.buffer===O.buffer&&(i=!1),!n)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return F(0===o,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(r,r+n),a.usedBytes=n;if(0===a.usedBytes&&0===o)return a.contents=t.slice(r,r+n),a.usedBytes=n;if(o+n<=a.usedBytes)return a.contents.set(t.subarray(r,r+n),o),n}if(E.expandFileStorage(a,o+n),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(r,r+n),o);else for(var s=0;s<n;s++)a.contents[o+s]=t[r+s];return a.usedBytes=Math.max(a.usedBytes,o+n),n},llseek:function(e,t,r){if(1===r?t+=e.position:2===r&&b.isFile(e.node.mode)&&(t+=e.node.usedBytes),t<0)throw new b.ErrnoError(28);return t},allocate:function(e,t,r){E.expandFileStorage(e.node,t+r),e.node.usedBytes=Math.max(e.node.usedBytes,t+r)},mmap:function(e,t,r,n,o,i){if(0!==t)throw new b.ErrnoError(28);if(!b.isFile(e.node.mode))throw new b.ErrnoError(43);var a,s,t=e.node.contents;if(2&i||t.buffer!==oe){if((0<n||n+r<t.length)&&(t=t.subarray?t.subarray(n,n+r):Array.prototype.slice.call(t,n,n+r)),s=!0,!(a=xe(r)))throw new b.ErrnoError(48);O.set(t,a)}else s=!1,a=t.byteOffset;return{ptr:a,allocated:s}},msync:function(e,t,r,n,o){if(b.isFile(e.node.mode))return 2&o||E.stream_ops.write(e,t,0,n,r,!1),0;throw new b.ErrnoError(43)}}},Be={0:"Success",1:"Arg list too long",2:"Permission denied",3:"Address already in use",4:"Address not available",5:"Address family not supported by protocol family",6:"No more processes",7:"Socket already connected",8:"Bad file number",9:"Trying to read unreadable message",10:"Mount device busy",11:"Operation canceled",12:"No children",13:"Connection aborted",14:"Connection refused",15:"Connection reset by peer",16:"File locking deadlock error",17:"Destination address required",18:"Math arg out of domain of func",19:"Quota exceeded",20:"File exists",21:"Bad address",22:"File too large",23:"Host is unreachable",24:"Identifier removed",25:"Illegal byte sequence",26:"Connection already in progress",27:"Interrupted system call",28:"Invalid argument",29:"I/O error",30:"Socket is already connected",31:"Is a directory",32:"Too many symbolic links",33:"Too many open files",34:"Too many links",35:"Message too long",36:"Multihop attempted",37:"File or path name too long",38:"Network interface is not configured",39:"Connection reset by network",40:"Network is unreachable",41:"Too many open files in system",42:"No buffer space available",43:"No such device",44:"No such file or directory",45:"Exec format error",46:"No record locks available",47:"The link has been severed",48:"Not enough core",49:"No message of desired type",50:"Protocol not available",51:"No space left on device",52:"Function not implemented",53:"Socket is not connected",54:"Not a directory",55:"Directory not empty",56:"State not recoverable",57:"Socket operation on non-socket",59:"Not a typewriter",60:"No such device or address",61:"Value too large for defined data type",62:"Previous owner died",63:"Not super-user",64:"Broken pipe",65:"Protocol error",66:"Unknown protocol",67:"Protocol wrong type for socket",68:"Math result not representable",69:"Read only file system",70:"Illegal seek",71:"No such process",72:"Stale file handle",73:"Connection timed out",74:"Text file busy",75:"Cross-device link",100:"Device not a stream",101:"Bad font file fmt",102:"Invalid slot",103:"Invalid request code",104:"No anode",105:"Block device required",106:"Channel number out of range",107:"Level 3 halted",108:"Level 3 reset",109:"Link number out of range",110:"Protocol driver not attached",111:"No CSI structure available",112:"Level 2 halted",113:"Invalid exchange",114:"Invalid request descriptor",115:"Exchange full",116:"No data (for no delay io)",117:"Timer expired",118:"Out of streams resources",119:"Machine is not on the network",120:"Package not installed",121:"The object is remote",122:"Advertise error",123:"Srmount error",124:"Communication error on send",125:"Cross mount point (not really error)",126:"Given log. name not unique",127:"f.d. invalid for this operation",128:"Remote address changed",129:"Can   access a needed shared lib",130:"Accessing a corrupted shared lib",131:".lib section in a.out corrupted",132:"Attempting to link in too many libs",133:"Attempting to exec a shared library",135:"Streams pipe error",136:"Too many users",137:"Socket type not supported",138:"Not supported",139:"Protocol family not supported",140:"Can't send after socket shutdown",141:"Too many references",142:"Host is down",148:"No medium (in tape drive)",156:"Level 2 not synchronized"},je={},b={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(e=w.resolve(b.cwd(),e)))return{path:"",node:null};if(8<(t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count)throw new b.ErrnoError(32);for(var r=v.normalizeArray(e.split("/").filter(e=>!!e),!1),n=b.root,o="/",i=0;i<r.length;i++){var a=i===r.length-1;if(a&&t.parent)break;if(n=b.lookupNode(n,r[i]),o=v.join2(o,r[i]),!b.isMountpoint(n)||a&&!t.follow_mount||(n=n.mounted.root),!a||t.follow)for(var s=0;b.isLink(n.mode);){var l=b.readlink(o),o=w.resolve(v.dirname(o),l),n=b.lookupPath(o,{recurse_count:t.recurse_count+1}).node;if(40<s++)throw new b.ErrnoError(32)}}return{path:o,node:n}},getPath:e=>{for(var t,r;;){if(b.isRoot(e))return r=e.mount.mountpoint,t?"/"!==r[r.length-1]?r+"/"+t:r+t:r;t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%b.nameTable.length},hashAddNode:e=>{var t=b.hashName(e.parent.id,e.name);e.name_next=b.nameTable[t],b.nameTable[t]=e},hashRemoveNode:e=>{var t=b.hashName(e.parent.id,e.name);if(b.nameTable[t]===e)b.nameTable[t]=e.name_next;else for(var r=b.nameTable[t];r;){if(r.name_next===e){r.name_next=e.name_next;break}r=r.name_next}},lookupNode:(e,t)=>{var r=b.mayLookup(e);if(r)throw new b.ErrnoError(r,e);for(var r=b.hashName(e.id,t),n=b.nameTable[r];n;n=n.name_next){var o=n.name;if(n.parent.id===e.id&&o===t)return n}return b.lookup(e,t)},createNode:(e,t,r,n)=>{F("object"==typeof e);e=new b.FSNode(e,t,r,n);return b.hashAddNode(e),e},destroyNode:e=>{b.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=b.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>b.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{return b.nodePermissions(e,"x")||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return b.lookupNode(e,t),20}catch(e){}return b.nodePermissions(e,"wx")},mayDelete:(e,t,r)=>{var n;try{n=b.lookupNode(e,t)}catch(e){return e.errno}t=b.nodePermissions(e,"wx");if(t)return t;if(r){if(!b.isDir(n.mode))return 54;if(b.isRoot(n)||b.getPath(n)===b.cwd())return 10}else if(b.isDir(n.mode))return 31;return 0},mayOpen:(e,t)=>e?b.isLink(e.mode)?32:b.isDir(e.mode)&&("r"!==b.flagsToPermissionString(t)||512&t)?31:b.nodePermissions(e,b.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:b.MAX_OPEN_FDS,r=e;r<=t;r++)if(!b.streams[r])return r;throw new b.ErrnoError(33)},getStream:e=>b.streams[e],createStream:(e,t,r)=>{b.FSStream||(b.FSStream=function(){this.shared={}},b.FSStream.prototype={object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get function(){return this.shared.position},set:function(e){this.shared.position=e}}}),e=Object.assign(new b.FSStream,e);t=b.nextfd(t,r);return e.fd=t,b.streams[t]=e},closeStream:e=>{b.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=b.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new b.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{b.devices[e]={stream_ops:t}},getDevice:e=>b.devices[e],getMounts:e=>{for(var t=[],r=[e];r.length;){var n=r.pop();t.push(n),r.push.apply(r,n.mounts)}return t},syncfs:(t,r)=>{"function"==typeof t&&(r=t,t=!1),b.syncFSRequests++,1<b.syncFSRequests&&s("warning: "+b.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var n=b.getMounts(b.root.mount),o=0;function i(e){return F(0<b.syncFSRequests),b.syncFSRequests--,r(e)}function a(e){if(e)return a.errored?void 0:(a.errored=!0,i(e));++o>=n.length&&i(null)}n.forEach(e=>{if(!e.type.syncfs)return a(null);e.type.syncfs(e,t,a)})},mount:(e,t,r)=>{if("string"==typeof e)throw e;var n,o="/"===r,i=!r;if(o&&b.root)throw new b.ErrnoError(10);if(!o&&!i){i=b.lookupPath(r,{follow_mount:!1});if(r=i.path,n=i.node,b.isMountpoint(n))throw new b.ErrnoError(10);if(!b.isDir(n.mode))throw new b.ErrnoError(54)}i={type:e,opts:t,mountpoint:r,mounts:[]},t=e.mount(i);return(t.mount=i).root=t,o?b.root=t:n&&(n.mounted=i,n.mount&&n.mount.mounts.push(i)),t},unmount:e=>{e=b.lookupPath(e,{follow_mount:!1});if(!b.isMountpoint(e.node))throw new b.ErrnoError(28);var e=e.node,t=e.mounted,n=b.getMounts(t),t=(Object.keys(b.nameTable).forEach(e=>{for(var t=b.nameTable[e];t;){var r=t.name_next;n.includes(t.mount)&&b.destroyNode(t),t=r}}),e.mounted=null,e.mount.mounts.indexOf(t));F(-1!==t),e.mount.mounts.splice(t,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,r)=>{var n=b.lookupPath(e,{parent:!0}).node,e=v.basename(e);if(!e||"."===e||".."===e)throw new b.ErrnoError(28);var o=b.mayCreate(n,e);if(o)throw new b.ErrnoError(o);if(n.node_ops.mknod)return n.node_ops.mknod(n,e,t,r);throw new b.ErrnoError(63)},create:(e,t)=>b.mknod(e,t=(t=void 0!==t?t:438)&4095|32768,0),mkdir:(e,t)=>b.mknod(e,t=(t=void 0!==t?t:511)&1023|16384,0),mkdirTree:(e,t)=>{for(var r=e.split("/"),n="",o=0;o<r.length;++o)if(r[o]){n+="/"+r[o];try{b.mkdir(n,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,r)=>(void 0===r&&(r=t,t=438),b.mknod(e,t|=8192,r)),symlink:(e,t)=>{if(!w.resolve(e))throw new b.ErrnoError(44);var r=b.lookupPath(t,{parent:!0}).node;if(!r)throw new b.ErrnoError(44);var t=v.basename(t),n=b.mayCreate(r,t);if(n)throw new b.ErrnoError(n);if(r.node_ops.symlink)return r.node_ops.symlink(r,t,e);throw new b.ErrnoError(63)},rename:(e,t)=>{var r=v.dirname(e),n=v.dirname(t),o=v.basename(e),i=v.basename(t),a=b.lookupPath(e,{parent:!0}).node,s=b.lookupPath(t,{parent:!0}).node;if(!a||!s)throw new b.ErrnoError(44);if(a.mount!==s.mount)throw new b.ErrnoError(75);var l,u=b.lookupNode(a,o);if("."!==w.relative(e,n).charAt(0))throw new b.ErrnoError(28);if("."!==w.relative(t,r).charAt(0))throw new b.ErrnoError(55);try{l=b.lookupNode(s,i)}catch(e){}if(u!==l){n=b.isDir(u.mode),t=b.mayDelete(a,o,n);if(t)throw new b.ErrnoError(t);if(t=l?b.mayDelete(s,i,n):b.mayCreate(s,i))throw new b.ErrnoError(t);if(!a.node_ops.rename)throw new b.ErrnoError(63);if(b.isMountpoint(u)||l&&b.isMountpoint(l))throw new b.ErrnoError(10);if(s!==a&&(t=b.nodePermissions(a,"w")))throw new b.ErrnoError(t);b.hashRemoveNode(u);try{a.node_ops.rename(u,s,i)}catch(e){throw e}finally{b.hashAddNode(u)}}},rmdir:e=>{var t=b.lookupPath(e,{parent:!0}).node,e=v.basename(e),r=b.lookupNode(t,e),n=b.mayDelete(t,e,!0);if(n)throw new b.ErrnoError(n);if(!t.node_ops.rmdir)throw new b.ErrnoError(63);if(b.isMountpoint(r))throw new b.ErrnoError(10);t.node_ops.rmdir(t,e),b.destroyNode(r)},readdir:e=>{e=b.lookupPath(e,{follow:!0}).node;if(e.node_ops.readdir)return e.node_ops.readdir(e);throw new b.ErrnoError(54)},unlink:e=>{var t=b.lookupPath(e,{parent:!0}).node;if(!t)throw new b.ErrnoError(44);var e=v.basename(e),r=b.lookupNode(t,e),n=b.mayDelete(t,e,!1);if(n)throw new b.ErrnoError(n);if(!t.node_ops.unlink)throw new b.ErrnoError(63);if(b.isMountpoint(r))throw new b.ErrnoError(10);t.node_ops.unlink(t,e),b.destroyNode(r)},readlink:e=>{e=b.lookupPath(e).node;if(!e)throw new b.ErrnoError(44);if(e.node_ops.readlink)return w.resolve(b.getPath(e.parent),e.node_ops.readlink(e));throw new b.ErrnoError(28)},stat:(e,t)=>{e=b.lookupPath(e,{follow:!t}).node;if(!e)throw new b.ErrnoError(44);if(e.node_ops.getattr)return e.node_ops.getattr(e);throw new b.ErrnoError(63)},lstat:e=>b.stat(e,!0),chmod:(e,t,r)=>{r="string"==typeof e?b.lookupPath(e,{follow:!r}).node:e;if(!r.node_ops.setattr)throw new b.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod:(e,t)=>{b.chmod(e,t,!0)},fchmod:(e,t)=>{e=b.getStream(e);if(!e)throw new b.ErrnoError(8);b.chmod(e.node,t)},chown:(e,t,r,n)=>{n="string"==typeof e?b.lookupPath(e,{follow:!n}).node:e;if(!n.node_ops.setattr)throw new b.ErrnoError(63);n.node_ops.setattr(n,{timestamp:Date.now()})},lchown:(e,t,r)=>{b.chown(e,t,r,!0)},fchown:(e,t,r)=>{e=b.getStream(e);if(!e)throw new b.ErrnoError(8);b.chown(e.node,t,r)},truncate:(e,t)=>{if(t<0)throw new b.ErrnoError(28);e="string"==typeof e?b.lookupPath(e,{follow:!0}).node:e;if(!e.node_ops.setattr)throw new b.ErrnoError(63);if(b.isDir(e.mode))throw new b.ErrnoError(31);if(!b.isFile(e.mode))throw new b.ErrnoError(28);var r=b.nodePermissions(e,"w");if(r)throw new b.ErrnoError(r);e.node_ops.setattr(e,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{e=b.getStream(e);if(!e)throw new b.ErrnoError(8);if(0==(2097155&e.flags))throw new b.ErrnoError(28);b.truncate(e.node,t)},utime:(e,t,r)=>{e=b.lookupPath(e,{follow:!0}).node;e.node_ops.setattr(e,{timestamp:Math.max(t,r)})},open:(e,t,r,n,o)=>{if(""===e)throw new b.ErrnoError(44);var i;if(r=void 0===r?438:r,r=64&(t="string"==typeof t?b.modeStringToFlags(t):t)?4095&r|32768:0,"object"==typeof e)i=e;else{e=v.normalize(e);try{i=b.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var a=!1;if(64&t)if(i){if(128&t)throw new b.ErrnoError(20)}else i=b.mknod(e,r,0),a=!0;if(!i)throw new b.ErrnoError(44);if(b.isChrdev(i.mode)&&(t&=-513),65536&t&&!b.isDir(i.mode))throw new b.ErrnoError(54);if(!a){r=b.mayOpen(i,t);if(r)throw new b.ErrnoError(r)}512&t&&b.truncate(i,0),t&=-131713;a=b.createStream({node:i,path:b.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1},n,o);return a.stream_ops.open&&a.stream_ops.open(a),!g.logReadFiles||1&t||(b.readFiles||(b.readFiles={}),e in b.readFiles||(b.readFiles[e]=1)),a},close:e=>{if(b.isClosed(e))throw new b.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{b.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,r)=>{if(b.isClosed(e))throw new b.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new b.ErrnoError(70);if(0!=r&&1!=r&&2!=r)throw new b.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,r),e.ungotten=[],e.position},read:(e,t,r,n,o)=>{if(n<0||o<0)throw new b.ErrnoError(28);if(b.isClosed(e))throw new b.ErrnoError(8);if(1==(2097155&e.flags))throw new b.ErrnoError(8);if(b.isDir(e.node.mode))throw new b.ErrnoError(31);if(!e.stream_ops.read)throw new b.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new b.ErrnoError(70)}else o=e.position;t=e.stream_ops.read(e,t,r,n,o);return i||(e.position+=t),t},write:(e,t,r,n,o,i)=>{if(n<0||o<0)throw new b.ErrnoError(28);if(b.isClosed(e))throw new b.ErrnoError(8);if(0==(2097155&e.flags))throw new b.ErrnoError(8);if(b.isDir(e.node.mode))throw new b.ErrnoError(31);if(!e.stream_ops.write)throw new b.ErrnoError(28);e.seekable&&1024&e.flags&&b.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new b.ErrnoError(70)}else o=e.position;t=e.stream_ops.write(e,t,r,n,o,i);return a||(e.position+=t),t},allocate:(e,t,r)=>{if(b.isClosed(e))throw new b.ErrnoError(8);if(t<0||r<=0)throw new b.ErrnoError(28);if(0==(2097155&e.flags))throw new b.ErrnoError(8);if(!b.isFile(e.node.mode)&&!b.isDir(e.node.mode))throw new b.ErrnoError(43);if(!e.stream_ops.allocate)throw new b.ErrnoError(138);e.stream_ops.allocate(e,t,r)},mmap:(e,t,r,n,o,i)=>{if(0!=(2&o)&&0==(2&i)&&2!=(2097155&e.flags))throw new b.ErrnoError(2);if(1==(2097155&e.flags))throw new b.ErrnoError(2);if(e.stream_ops.mmap)return e.stream_ops.mmap(e,t,r,n,o,i);throw new b.ErrnoError(43)},msync:(e,t,r,n,o)=>e&&e.stream_ops.msync?e.stream_ops.msync(e,t,r,n,o):0,munmap:e=>0,ioctl:(e,t,r)=>{if(e.stream_ops.ioctl)return e.stream_ops.ioctl(e,t,r);throw new b.ErrnoError(59)},readFile:function(e){let t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var r,n=b.open(e,t.flags),e=b.stat(e).size,o=new Uint8Array(e);return b.read(n,o,0,e,0),"utf8"===t.encoding?r=i(o,0):"binary"===t.encoding&&(r=o),b.close(n),r},writeFile:function(e,t){let r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};r.flags=r.flags||577;e=b.open(e,r.flags,r.mode);if("string"==typeof t){var n=new Uint8Array(ne(t)+1),o=te(t,n,0,n.length);b.write(e,n,0,o,void 0,r.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");b.write(e,t,0,t.byteLength,void 0,r.canOwn)}b.close(e)},cwd:()=>b.currentPath,chdir:e=>{e=b.lookupPath(e,{follow:!0});if(null===e.node)throw new b.ErrnoError(44);if(!b.isDir(e.node.mode))throw new b.ErrnoError(54);var t=b.nodePermissions(e.node,"x");if(t)throw new b.ErrnoError(t);b.currentPath=e.path},createDefaultDirectories:()=>{b.mkdir("/tmp"),b.mkdir("/home"),b.mkdir("/home/web_user")},createDefaultDevices:()=>{b.mkdir("/dev"),b.registerDevice(b.makedev(1,3),{read:()=>0,write:(e,t,r,n,o)=>n}),b.mkdev("/dev/null",b.makedev(1,3)),Ue.register(b.makedev(5,0),Ue.default_tty_ops),Ue.register(b.makedev(6,0),Ue.default_tty1_ops),b.mkdev("/dev/tty",b.makedev(5,0)),b.mkdev("/dev/tty1",b.makedev(6,0));var e=function(){var e;if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=new Uint8Array(1),function(){return crypto.getRandomValues(e),e[0]};if(j)try{var t=Ar.default;return function(){return t.randomBytes(1)[0]}}catch(e){}return function(){h("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: function(array) { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")}}();b.createDevice("/dev","random",e),b.createDevice("/dev","urandom",e),b.mkdir("/dev/shm"),b.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{b.mkdir("/proc");var t=b.mkdir("/proc/self");b.mkdir("/proc/self/fd"),b.mount({mount:()=>{var e=b.createNode(t,"fd",16895,73);return e.node_ops={lookup:(e,t)=>{var r=b.getStream(+t);if(!r)throw new b.ErrnoError(8);t={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return t.parent=t}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{g.stdin?b.createDevice("/dev","stdin",g.stdin):b.symlink("/dev/tty","/dev/stdin"),g.stdout?b.createDevice("/dev","stdout",null,g.stdout):b.symlink("/dev/tty","/dev/stdout"),g.stderr?b.createDevice("/dev","stderr",null,g.stderr):b.symlink("/dev/tty1","/dev/stderr");var e=b.open("/dev/stdin",0),t=b.open("/dev/stdout",1),r=b.open("/dev/stderr",1);F(0===e.fd,"invalid handle for stdin ("+e.fd+")"),F(1===t.fd,"invalid handle for stdout ("+t.fd+")"),F(2===r.fd,"invalid handle for stderr ("+r.fd+")")},ensureErrnoError:()=>{b.ErrnoError||(b.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){for(var t in this.errno=e,je)if(je[t]===e){this.code=t;break}},this.setErrno(e),this.message=Be[e],this.stack&&(Object.defineProperty(this,"stack",{value:(new Error).stack,writable:!0}),this.stack=Ne(this.stack))},b.ErrnoError.prototype=new Error,b.ErrnoError.prototype.constructor=b.ErrnoError,[44].forEach(e=>{b.genericErrors[e]=new b.ErrnoError(e),b.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{b.ensureErrnoError(),b.nameTable=new Array(4096),b.mount(E,{},"/"),b.createDefaultDirectories(),b.createDefaultDevices(),b.createSpecialDirectories(),b.filesystems={MEMFS:E}},init:(e,t,r)=>{F(!b.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),b.init.initialized=!0,b.ensureErrnoError(),g.stdin=e||g.stdin,g.stdout=t||g.stdout,g.stderr=r||g.stderr,b.createStandardStreams()},quit:()=>{b.init.initialized=!1,yr();for(var e=0;e<b.streams.length;e++){var t=b.streams[e];t&&b.close(t)}},getMode:(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},findObject:(e,t)=>{e=b.analyzePath(e,t);return e.exists?e.object:null},analyzePath:(e,t)=>{try{e=(n=b.lookupPath(e,{follow:!t})).path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var n=b.lookupPath(e,{parent:!0});r.parentExists=!0,r.parentPath=n.path,r.parentObject=n.node,r.name=v.basename(e),n=b.lookupPath(e,{follow:!t}),r.exists=!0,r.path=n.path,r.object=n.node,r.name=n.node.name,r.isRoot="/"===n.path}catch(e){r.error=e.errno}return r},createPath:(e,t,r,n)=>{e="string"==typeof e?e:b.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=v.join2(e,i);try{b.mkdir(a)}catch(e){}e=a}}return a},createFile:(e,t,r,n,o)=>{e=v.join2("string"==typeof e?e:b.getPath(e),t),t=b.getMode(n,o);return b.create(e,t)},createDataFile:(e,t,r,n,o,i)=>{var a=t,t=(e&&(e="string"==typeof e?e:b.getPath(e),a=t?v.join2(e,t):e),b.getMode(n,o)),e=b.create(a,t);if(r){if("string"==typeof r){for(var s=new Array(r.length),l=0,u=r.length;l<u;++l)s[l]=r.charCodeAt(l);r=s}b.chmod(e,146|t);n=b.open(e,577);b.write(n,r,0,r.length,0,i),b.close(n),b.chmod(e,t)}return e},createDevice:(e,t,l,a)=>{var e=v.join2("string"==typeof e?e:b.getPath(e),t),t=b.getMode(!!l,!!a),r=(b.createDevice.major||(b.createDevice.major=64),b.makedev(b.createDevice.major++,0));return b.registerDevice(r,{open:e=>{e.seekable=!1},close:e=>{a&&a.buffer&&a.buffer.length&&a(10)},read:(e,t,r,n,o)=>{for(var i,a=0,s=0;s<n;s++){try{i=l()}catch(e){throw new b.ErrnoError(29)}if(void 0===i&&0===a)throw new b.ErrnoError(6);if(null==i)break;a++,t[r+s]=i}return a&&(e.node.timestamp=Date.now()),a},write:(e,t,r,n,o)=>{for(var i=0;i<n;i++)try{a(t[r+i])}catch(e){throw new b.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),i}}),b.mkdev(e,t,r)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!$)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=ur($(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new b.ErrnoError(29)}},createLazyFile:(e,t,a,r,n)=>{function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){var t;if(!(e>this.length-1||e<0))return t=e%this.chunkSize,e=e/this.chunkSize|0,this.getter(e)[t]},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",a,!1),e.send(null),!(200<=e.status&&e.status<300||304===e.status))throw new Error("Couldn't load "+a+". Status: "+e.status);var t,n=Number(e.getResponseHeader("Content-length")),r=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,e=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,o=1048576,i=(r||(o=n),this);i.setDataGetter(e=>{var t=e*o,r=(e+1)*o-1,r=Math.min(r,n-1);if(void 0===i.chunks[e]&&(i.chunks[e]=((e,t)=>{if(t<e)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(n-1<t)throw new Error("only "+n+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",a,!1),n!==o&&r.setRequestHeader("Range","bytes="+e+"-"+t),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),200<=r.status&&r.status<300||304===r.status)return void 0!==r.response?new Uint8Array(r.response||[]):ur(r.responseText||"",!0);throw new Error("Couldn't load "+a+". Status: "+r.status)})(t,r)),void 0===i.chunks[e])throw new Error("doXHR failed!");return i.chunks[e]}),!e&&n||(o=n=1,n=this.getter(0).length,o=n,q("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=n,this._chunkSize=o,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i=new o,i=(Object.defineProperties(i,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}}),{isDevice:!1,contents:i})}else i={isDevice:!1,url:a};var l=b.createFile(e,t,i,r,n),s=(i.contents?l.contents=i.contents:i.url&&(l.contents=null,l.url=i.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}}),{});return Object.keys(l.stream_ops).forEach(e=>{var t=l.stream_ops[e];s[e]=function(){return b.forceLoadFile(l),t.apply(null,arguments)}}),s.read=(e,t,r,n,o)=>{b.forceLoadFile(l);var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,n);if(F(0<=a),i.slice)for(var s=0;s<a;s++)t[r+s]=i[o+s];else for(s=0;s<a;s++)t[r+s]=i.get(o+s);return a},l.stream_ops=s,l},createPreloadedFile:(r,n,e,o,i,a,s,l,u,c)=>{var t,d,f,p=n?w.resolve(v.join2(r,n)):r,h=Ce("cp "+p);function m(e){function t(e){c&&c(),l||b.createDataFile(r,n,e,o,i,u),a&&a(),De(h)}Browser.handledByPreloadPlugin(e,p,t,()=>{s&&s(),De(h)})||t(e)}Pe(h),"string"==typeof e?(d=s,f=Ce("al "+(t=e)),W(t,function(e){F(e,'Loading data file "'+t+'" failed (no arrayBuffer).'),m(new Uint8Array(e)),f&&De(f)},function(e){if(!d)throw'Loading data file "'+t+'" failed.';d()}),f&&Pe(f)):m(e)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(a,s,l)=>{s=s||(()=>{}),l=l||(()=>{});var e=b.indexedDB();try{var u=e.open(b.DB_NAME(),b.DB_VERSION)}catch(a){return l(a)}u.onupgradeneeded=()=>{q("creating db"),u.result.createObjectStore(b.DB_STORE_NAME)},u.onsuccess=()=>{var e=u.result.transaction([b.DB_STORE_NAME],"readwrite"),t=e.objectStore(b.DB_STORE_NAME),r=0,n=0,o=a.length;function i(){(0==n?s:l)()}a.forEach(e=>{e=t.put(b.analyzePath(e).object.contents,e);e.onsuccess=()=>{++r+n==o&&i()},e.onerror=()=>{r+ ++n==o&&i()}}),e.onerror=l},u.onerror=l},loadFilesFromDB:(s,l,u)=>{l=l||(()=>{}),u=u||(()=>{});var e=b.indexedDB();try{var c=e.open(b.DB_NAME(),b.DB_VERSION)}catch(s){return u(s)}c.onupgradeneeded=u,c.onsuccess=()=>{var e=c.result;try{var t=e.transaction([b.DB_STORE_NAME],"readonly")}catch(e){return void u(e)}var r=t.objectStore(b.DB_STORE_NAME),n=0,o=0,i=s.length;function a(){(0==o?l:u)()}s.forEach(e=>{var t=r.get(e);t.onsuccess=()=>{b.analyzePath(e).exists&&b.unlink(e),b.createDataFile(v.dirname(e),v.basename(e),t.result,!0,!0,!0),++n+o==i&&a()},t.onerror=()=>{n+ ++o==i&&a()}}),t.onerror=u},c.onerror=u},absolutePath:()=>{h("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder:()=>{h("FS.createFolder has been removed; use FS.mkdir instead")},createLink:()=>{h("FS.createLink has been removed; use FS.symlink instead")},joinPath:()=>{h("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc:()=>{h("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath:()=>{h("FS.standardizePath has been removed; use PATH.normalize instead")}},_={DEFAULT_POLLMASK:5,calculateAt:function(e,t,r){if(v.isAbs(t))return t;var n;if(-100===e)n=b.cwd();else{e=b.getStream(e);if(!e)throw new b.ErrnoError(8);n=e.path}if(0!=t.length)return v.join2(n,t);if(r)return n;throw new b.ErrnoError(44)},doStat:function(e,t,r){try{var n=e(t)}catch(e){if(e&&e.node&&v.normalize(t)!==v.normalize(b.getPath(e.node)))return-54;throw e}return R[r>>2]=n.dev,R[r+4>>2]=0,R[r+8>>2]=n.ino,R[r+12>>2]=n.mode,R[r+16>>2]=n.nlink,R[r+20>>2]=n.uid,R[r+24>>2]=n.gid,R[r+28>>2]=n.rdev,R[r+32>>2]=0,d=[n.size>>>0,(c=n.size,1<=+Math.abs(c)?0<c?(0|Math.min(+Math.floor(c/4294967296),4294967295))>>>0:~~+Math.ceil((c-(~~c>>>0))/4294967296)>>>0:0)],R[r+40>>2]=d[0],R[r+44>>2]=d[1],R[r+48>>2]=4096,R[r+52>>2]=n.blocks,R[r+56>>2]=n.atime.getTime()/1e3|0,R[r+60>>2]=0,R[r+64>>2]=n.mtime.getTime()/1e3|0,R[r+68>>2]=0,R[r+72>>2]=n.ctime.getTime()/1e3|0,R[r+76>>2]=0,d=[n.ino>>>0,(c=n.ino,1<=+Math.abs(c)?0<c?(0|Math.min(+Math.floor(c/4294967296),4294967295))>>>0:~~+Math.ceil((c-(~~c>>>0))/4294967296)>>>0:0)],R[r+80>>2]=d[0],R[r+84>>2]=d[1],0},doMsync:function(e,t,r,n,o){e=M.slice(e,e+r);b.msync(t,e,o,r,n)},doMknod:function(e,t,r){switch(61440&t){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return b.mknod(e,t,r),0},doReadlink:function(e,t,r){if(r<=0)return-28;var e=b.readlink(e),n=Math.min(r,ne(e)),o=O[t+n];return re(e,t,r+1),O[t+n]=o,n},doAccess:function(e,t){if(-8&t)return-28;e=b.lookupPath(e,{follow:!0}).node;if(!e)return-44;var r="";return 4&t&&(r+="r"),2&t&&(r+="w"),1&t&&(r+="x"),r&&b.nodePermissions(e,r)?-2:0},doReadv:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=R[t>>2],s=R[t+4>>2],a=(t+=8,b.read(e,O,a,s,n));if(a<0)return-1;if(o+=a,a<s)break}return o},doWritev:function(e,t,r,n){for(var o=0,i=0;i<r;i++){var a=R[t>>2],s=R[t+4>>2],a=(t+=8,b.write(e,O,a,s,n));if(a<0)return-1;o+=a}return o},varargs:void 0,get:function(){return F(null!=_.varargs),_.varargs+=4,R[_.varargs-4>>2]},getStr:function(e){return ee(e)},getStreamFromFD:function(e){e=b.getStream(e);if(e)return e;throw new b.ErrnoError(8)}};function $e(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var We=void 0;function T(e){for(var t="",r=e;M[r];)t+=We[M[r++]];return t}var ze={},He={},Ve={};function Ge(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return 48<=t&&t<=57?"_"+e:e}function Ye(e,t){return e=Ge(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Xe(e,t){var r=Ye(t,function(e){this.name=t,this.message=e;e=new Error(e).stack;void 0!==e&&(this.stack=this.toString()+"\n"+e.replace(/^Error(:[^\n]*)?\n/,""))});return r.prototype=Object.create(e.prototype),(r.prototype.constructor=r).prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},r}var qe=void 0;function k(e){throw new qe(e)}var Je=void 0;function Ke(e){throw new Je(e)}function Qe(n,t,o){function r(e){var t=o(e);t.length!==n.length&&Ke("Mismatched type converter count");for(var r=0;r<n.length;++r)S(n[r],t[r])}n.forEach(function(e){Ve[e]=t});var i=new Array(t.length),a=[],s=0;t.forEach((e,t)=>{He.hasOwnProperty(e)?i[t]=He[e]:(a.push(e),ze.hasOwnProperty(e)||(ze[e]=[]),ze[e].push(()=>{i[t]=He[e],++s===a.length&&r(i)}))}),0===a.length&&r(i)}function S(e,t,r){r=2<arguments.length&&void 0!==r?r:{};if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var n=t.name;if(e||k('type "'+n+'" must have a positive integer typeid pointer'),He.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;k("Cannot register type '"+n+"' twice")}He[e]=t,delete Ve[e],ze.hasOwnProperty(e)&&(r=ze[e],delete ze[e],r.forEach(e=>e()))}function Ze(e){if(!(this instanceof A))return!1;if(!(e instanceof A))return!1;for(var t=this.$$.ptrType.registeredClass,r=this.$$.ptr,n=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)r=t.upcast(r),t=t.baseClass;for(;n.baseClass;)o=n.upcast(o),n=n.baseClass;return t===n&&r===o}function et(e){k(e.$$.ptrType.registeredClass.name+" instance already deleted")}var tt=!1;function rt(e){}function nt(e){--e.count.value,0===e.count.value&&((e=e).smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr))}function ot(e,t,r){if(t===r)return e;if(void 0===r.baseClass)return null;e=ot(e,t,r.baseClass);return null===e?null:r.downcast(e)}var it={};function at(){return Object.keys(ft).length}function st(){var e,t=[];for(e in ft)ft.hasOwnProperty(e)&&t.push(ft[e]);return t}var lt=[];function ut(){for(;lt.length;){var e=lt.pop();e.$$.deleteScheduled=!1,e.delete()}}var ct=void 0;function dt(e){ct=e,lt.length&&ct&&ct(ut)}var ft={};function pt(e,t){return t=function(e,t){for(void 0===t&&k("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),ft[t]}function ht(e,t){return t.ptrType&&t.ptr||Ke("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&Ke("Both smartPtrType and smartPtr must be specified"),t.count={value:1},gt(Object.create(e,{$$:{value:t}}))}function mt(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=pt(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();r=r.clone();return this.destructor(e),r}function n(){return this.isSmartPointer?ht(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ht(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}r=this.registeredClass.getActualType(t),r=it[r];if(!r)return n.call(this);var r=this.isConst?r.constPointerType:r.pointerType,o=ot(t,this.registeredClass,r.registeredClass);return null===o?n.call(this):this.isSmartPointer?ht(r.registeredClass.instancePrototype,{ptrType:r,ptr:o,smartPtrType:this,smartPtr:e}):ht(r.registeredClass.instancePrototype,{ptrType:r,ptr:o})}function gt(e){return"undefined"==typeof FinalizationRegistry?(gt=e=>e,e):(tt=new FinalizationRegistry(e=>{console.warn(e.leakWarning.stack.replace(/^Error: /,"")),nt(e.$$)}),rt=e=>tt.unregister(e),(gt=e=>{var t,r,n=e.$$;return n.smartPtr&&(r=n.ptrType.registeredClass,(t={$$:n}).leakWarning=new Error("Embind found a leaked C++ instance "+r.name+" <0x"+n.ptr.toString(16)+">.\nWe'll free it automatically in this case, but this functionality is not reliable across various environments.\nMake sure to invoke .delete() manually once you're done with the instance instead.\nOriginally allocated"),"captureStackTrace"in Error&&Error.captureStackTrace(t.leakWarning,mt),tt.register(e,t,e)),e})(e))}function yt(){if(this.$$.ptr||et(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=gt(Object.create(Object.getPrototypeOf(this),{$$:{value:{count:(e=this.$$).count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function vt(){this.$$.ptr||et(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&k("Object already scheduled for deletion"),rt(this),nt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function wt(){return!this.$$.ptr}function Et(){return this.$$.ptr||et(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&k("Object already scheduled for deletion"),lt.push(this),1===lt.length&&ct&&ct(ut),this.$$.deleteScheduled=!0,this}function A(){}function bt(e,t,r){var n;void 0===e[t].overloadTable&&(n=e[t],e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||k("Function '"+r+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n)}function _t(e,t,r,n,o,i,a,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=o,this.getActualType=i,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function Tt(e,t,r){for(;t!==r;)t.upcast||k("Expected null or instance of "+r.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function kt(e,t){if(null===t)return this.isReference&&k("null is not a valid "+this.name),0;t.$$||k('Cannot pass "'+Ht(t)+'" as a '+this.name),t.$$.ptr||k("Cannot pass deleted object as a pointer of type "+this.name);var r=t.$$.ptrType.registeredClass;return Tt(t.$$.ptr,r,this.registeredClass)}function St(e,t){if(null===t)return this.isReference&&k("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,n),n):0;t.$$||k('Cannot pass "'+Ht(t)+'" as a '+this.name),t.$$.ptr||k("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&k("Cannot convert argument of type "+(t.$$.smartPtrType||t.$$.ptrType).name+" to parameter type "+this.name);var r,n,o=t.$$.ptrType.registeredClass;if(n=Tt(t.$$.ptr,o,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&k("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:k("Cannot convert argument of type "+(t.$$.smartPtrType||t.$$.ptrType).name+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:t.$$.smartPtrType===this?n=t.$$.smartPtr:(r=t.clone(),n=this.rawShare(n,N.toHandle(function(){r.delete()})),null!==e&&e.push(this.rawDestructor,n));break;default:k("Unsupporting sharing policy")}return n}function At(e,t){if(null===t)return this.isReference&&k("null is not a valid "+this.name),0;t.$$||k('Cannot pass "'+Ht(t)+'" as a '+this.name),t.$$.ptr||k("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&k("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;return Tt(t.$$.ptr,r,this.registeredClass)}function Ct(e){return this.fromWireType(f[e>>2])}function Pt(e){return e=this.rawGetPointee?this.rawGetPointee(e):e}function Dt(e){this.rawDestructor&&this.rawDestructor(e)}function Ft(e){null!==e&&e.delete()}function C(e,t,r,n,o,i,a,s,l,u,c){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=o,this.pointeeType=i,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=u,this.rawDestructor=c,o||void 0!==t.baseClass?this.toWireType=St:(this.toWireType=n?kt:At,this.destructorFunction=null)}function Ot(e,t,r){var n,o;return e.includes("j")?(n=t,o=r,F("dynCall_"+e in g,"bad function pointer type - no table for sig '"+e+"'"),o&&o.length?F(o.length===e.substring(1).replace(/j/g,"--").length):F(1==e.length),e=g["dynCall_"+e],o&&o.length?e.apply(null,[n].concat(o)):e.call(null,n)):(F(Ie(t),"missing table entry in dynCall: "+t),Ie(t).apply(null,r))}function P(e,t){var r,n,o,i=(e=T(e)).includes("j")?(n=t,F((r=e).includes("j"),"getDynCaller should only be called with i64 sigs"),o=[],function(){return o.length=0,Object.assign(o,arguments),Ot(r,n,o)}):Ie(t);return"function"!=typeof i&&k("unknown function pointer with signature "+e+": "+t),i}var Mt=void 0;function Rt(e){var e=gr(e),t=T(e);return I(e),t}function Nt(e,t){var r=[],n={};throw t.forEach(function e(t){n[t]||He[t]||(Ve[t]?Ve[t].forEach(e):(r.push(t),n[t]=!0))}),new Mt(e+": "+r.map(Rt).join([", "]))}function It(e,t){for(var r=[],n=0;n<e;n++)r.push(R[(t>>2)+n]);return r}function Lt(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Ut(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var r=Ye(e.name||"unknownFunctionName",function(){}),r=(r.prototype=e.prototype,new r),e=e.apply(r,t);return e instanceof Object?e:r}function xt(e,t,r,n,o){var i=t.length;i<2&&k("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var r=null!==t[1]&&null!==r,a=!1,s=1;s<t.length;++s)if(null!==t[s]&&void 0===t[s].destructorFunction){a=!0;break}for(var l="void"!==t[0].name,u="",c="",s=0;s<i-2;++s)u+=(0!==s?", ":"")+"arg"+s,c+=(0!==s?", ":"")+"arg"+s+"Wired";var d="return function "+Ge(e)+"("+u+") {\nif (arguments.length !== "+(i-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(i-2)+" args!');\n}\n",f=(a&&(d+="var destructors = [];\n"),a?"destructors":"null"),p=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],h=[k,n,o,Lt,t[0],t[1]];for(r&&(d+="var thisWired = classParam.toWireType("+f+", this);\n"),s=0;s<i-2;++s)d+="var arg"+s+"Wired = argType"+s+".toWireType("+f+", arg"+s+"); // "+t[s+2].name+"\n",p.push("argType"+s),h.push(t[s+2]);if(d+=(l?"var rv = ":"")+"invoker(fn"+(0<(c=r?"thisWired"+(0<c.length?", ":"")+c:c).length?", ":"")+c+");\n",a)d+="runDestructors(destructors);\n";else for(s=r?1:2;s<t.length;++s){var m=1===s?"thisWired":"arg"+(s-2)+"Wired";null!==t[s].destructorFunction&&(d+=m+"_dtor("+m+"); // "+t[s].name+"\n",p.push(m+"_dtor"),h.push(t[s].destructorFunction))}return l&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),p.push(d+="}\n"),Ut(Function,p).apply(null,h)}function Bt(e,t,r){return e instanceof Object||k(r+' with invalid "this": '+e),e instanceof t.registeredClass.constructor||k(r+' incompatible with "this" of type '+e.constructor.name),e.$$.ptr||k("cannot call emscripten binding method "+r+" on deleted object"),Tt(e.$$.ptr,e.$$.ptrType.registeredClass,t.registeredClass)}var jt=[],D=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function $t(e){4<e&&0==--D[e].refcount&&(D[e]=void 0,jt.push(e))}function Wt(){for(var e=0,t=5;t<D.length;++t)void 0!==D[t]&&++e;return e}function zt(){for(var e=5;e<D.length;++e)if(void 0!==D[e])return D[e];return null}var N={toValue:e=>(e||k("Cannot use deleted val. handle = "+e),D[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=jt.length?jt.pop():D.length;return D[t]={refcount:1,value:e},t}}};function Ht(e){if(null===e)return"null";var t=typeof e;return"object"==t||"array"==t||"function"==t?e.toString():""+e}function Vt(e,t){switch(t){case 2:return function(e){return this.fromWireType(ae[e>>2])};case 3:return function(e){return this.fromWireType(se[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Gt(e,t,r){switch(t){case 0:return r?function(e){return O[e]}:function(e){return M[e]};case 1:return r?function(e){return l[e>>1]}:function(e){return ie[e>>1]};case 2:return r?function(e){return R[e>>2]}:function(e){return f[e>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Yt(e,t){var r=He[e];return void 0===r&&k(t+" has unknown type "+Rt(e)),r}var Xt={},qt=[],Jt=[];function Kt(e,t){return F(t===(0|t)),(e>>>0)+4294967296*t}function Qt(e,t){if(e<=0)return e;var r=t<=32?Math.abs(1<<t-1):Math.pow(2,t-1);return e=r<=e&&(t<=32||r<e)?-2*r+e:e}function Zt(e,t){return 0<=e?e:t<=32?2*Math.abs(1<<t-1)+e:Math.pow(2,t)+e}function er(e,t){F(0==(3&t));var r=e,n=t;function o(e){var t,r;return r=n,"double"===e||"i64"===e?7&r&&(F(4==(7&r)),r+=4):F(0==(3&r)),n=r,"double"===e?(t=Number(se[n>>3]),n+=8):"i64"==e?(t=[R[n>>2],R[n+4>>2]],n+=8):(F(0==(3&n)),e="i32",t=R[n>>2],n+=4),t}for(var i,a,s=[];;){var l=r;if(0===(i=O[r>>0]))break;if(a=O[r+1>>0],37==i){var u=!1,c=!1,d=!1,f=!1,p=!1;e:for(;;){switch(a){case 43:u=!0;break;case 45:c=!0;break;case 35:d=!0;break;case 48:if(f)break e;f=!0;break;case 32:p=!0;break;default:break e}a=O[++r+1>>0]}var h=0;if(42==a)h=o("i32"),a=O[++r+1>>0];else for(;48<=a&&a<=57;)h=10*h+(a-48),a=O[++r+1>>0];var m,g=!1,y=-1;if(46==a){if(g=!(y=0),42==(a=O[++r+1>>0]))y=o("i32"),r++;else for(;;){var v=O[r+1>>0];if(v<48||57<v)break;y=10*y+(v-48),r++}a=O[r+1>>0]}switch(y<0&&(g=!(y=6)),String.fromCharCode(a)){case"h":m=104==O[r+2>>0]?(r++,1):2;break;case"l":m=108==O[r+2>>0]?(r++,8):4;break;case"L":case"q":case"j":m=8;break;case"z":case"t":case"I":m=4;break;default:m=null}switch(m&&r++,a=O[r+1>>0],String.fromCharCode(a)){case"d":case"i":case"u":case"o":case"x":case"X":case"p":var w=100==a||105==a,w=(b=o("i"+8*(m=m||4)),8==m&&(b=117==a?(b[0]>>>0)+4294967296*(b[1]>>>0):Kt(b[0],b[1])),m<=4&&(b=(w?Qt:Zt)(b&Math.pow(256,m)-1,8*m)),Math.abs(b)),E="";if(100==a||105==a)_=Qt(b,8*m).toString(10);else if(117==a)_=Zt(b,8*m).toString(10),b=Math.abs(b);else if(111==a)_=(d?"0":"")+w.toString(8);else if(120==a||88==a){if(E=d&&0!=b?"0x":"",b<0){for(var b=-b,_=(w-1).toString(16),T=[],k=0;k<_.length;k++)T.push((15-parseInt(_[k],16)).toString(16));for(_=T.join("");_.length<2*m;)_="f"+_}else _=w.toString(16);88==a&&(E=E.toUpperCase(),_=_.toUpperCase())}else 112==a&&(_=0===w?"(nil)":(E="0x",w.toString(16)));if(g)for(;_.length<y;)_="0"+_;for(0<=b&&(u?E="+"+E:p&&(E=" "+E)),"-"==_.charAt(0)&&(E="-"+E,_=_.substr(1));E.length+_.length<h;)c?_+=" ":f?_="0"+_:E=" "+E;(_=E+_).split("").forEach(function(e){s.push(e.charCodeAt(0))});break;case"f":case"F":case"e":case"E":case"g":case"G":if(b=o("double"),isNaN(b))f=!(_="nan");else if(isFinite(b)){var w=!1,S=Math.min(y,20),A=(103!=a&&71!=a||(w=!0,y=y||1,(D=parseInt(b.toExponential(S).split("e")[1],10))<y&&-4<=D?(a=(103==a?"f":"F").charCodeAt(0),y-=D+1):(a=(103==a?"e":"E").charCodeAt(0),y--),S=Math.min(y,20)),101==a||69==a?(_=b.toExponential(S),/[eE][-+]\d$/.test(_)&&(_=_.slice(0,-1)+"0"+_.slice(-1))):102!=a&&70!=a||(_=b.toFixed(S),0===b&&(b<0||0===b&&1/b==-1/0)&&(_="-"+_)),_.split("e"));if(w&&!d)for(;1<A[0].length&&A[0].includes(".")&&("0"==A[0].slice(-1)||"."==A[0].slice(-1));)A[0]=A[0].slice(0,-1);else for(d&&-1==_.indexOf(".")&&(A[0]+=".");y>S++;)A[0]+="0";_=A[0]+(1<A.length?"e"+A[1]:""),69==a&&(_=_.toUpperCase()),0<=b&&(u?_="+"+_:p&&(_=" "+_))}else _=(b<0?"-":"")+"inf",f=!1;for(;_.length<h;)c?_+=" ":_=!f||"-"!=_[0]&&"+"!=_[0]?(f?"0":" ")+_:_[0]+"0"+_.slice(1);(_=a<97?_.toUpperCase():_).split("").forEach(function(e){s.push(e.charCodeAt(0))});break;case"s":var C=o("i8*"),P=C?hr(C):"(null)".length;if(g&&(P=Math.min(P,y)),!c)for(;P<h--;)s.push(32);if(C)for(k=0;k<P;k++)s.push(M[C++>>0]);else s=s.concat(ur("(null)".substr(0,P),!0));if(c)for(;P<h--;)s.push(32);break;case"c":for(c&&s.push(o("i8"));0<--h;)s.push(32);c||s.push(o("i8"));break;case"n":var D=o("i32*");R[D>>2]=s.length;break;case"%":s.push(i);break;default:for(k=l;k<r+2;k++)s.push(O[k>>0])}r+=2}else s.push(i),r+=1}return s}function tr(e){if(!e||!e.callee||!e.callee.name)return[null,"",""];e.callee.toString();var t,r=e.callee.name,n="(",o=!0;for(t in e){var i=e[t];o||(n+=", "),o=!1,n+="number"==typeof i||"string"==typeof i?i:"("+typeof i+")"}n+=")";var a=e.callee.caller;return[e=a?a.arguments:[],r,n=o?"":n]}function rr(e,t){24&e&&(t=t.replace(/\s+$/,""),t+=(0<t.length?"\n":"")+function(e){var t=(n=Le()).lastIndexOf("_emscripten_log"),r=n.lastIndexOf("_emscripten_get_callstack"),t=n.indexOf("\n",Math.max(t,r))+1,n=n.slice(t),o=(32&e&&y("EM_LOG_DEMANGLE is deprecated; ignoring"),8&e&&"undefined"==typeof emscripten_source_map&&(y('Source map information is not available, emscripten_log with EM_LOG_C_STACK will be ignored. Build with "--pre-js $EMSCRIPTEN/src/emscripten-source-map.min.js" linker flag to add source map loading to code.'),e=e^8|16),null);if(128&e)for(o=tr(arguments);o[1].includes("_emscripten_");)o=tr(o[0]);var i,a=n.split("\n"),s=(n="",new RegExp("\\s*(.*?)@(.*?):([0-9]+):([0-9]+)")),l=new RegExp("\\s*(.*?)@(.*):(.*)(:(.*))?"),u=new RegExp("\\s*at (.*?) \\((.*):(.*):(.*)\\)");for(i in a){var c=a[i],d="",f="",p=0,h=0,m=u.exec(c);if(m&&5==m.length)d=m[1],f=m[2],p=m[3],h=m[4];else{if(!((m=(m=s.exec(c))?m:l.exec(c))&&4<=m.length)){n+=c+"\n";continue}d=m[1],f=m[2],p=m[3],h=0|m[4]}c=!1;8&e&&((c=(m=emscripten_source_map.originalPositionFor({line:p,column:h}))&&m.source)&&(64&e&&(m.source=m.source.substring(m.source.replace(/\\/g,"/").lastIndexOf("/")+1)),n+="    at "+d+" ("+m.source+":"+m.line+":"+m.column+")\n")),(16&e||!c)&&(n+=(c?"     = "+d:"    at "+d)+" ("+(f=64&e?f.substring(f.replace(/\\/g,"/").lastIndexOf("/")+1):f)+":"+p+":"+h+")\n"),128&e&&o[0]&&(o[1]==d&&0<o[2].length&&(n=n.replace(/\s+$/,""),n+=" with values: "+o[1]+o[2]+"\n"),o=tr(o[0]))}return n.replace(/\s+$/,"")}(e)),1&e?4&e?console.error(t):2&e?console.warn(t):512&e?console.info(t):256&e?console.debug(t):console.log(t):(6&e?s:q)(t)}function nr(t){try{return X.grow(t-oe.byteLength+65535>>>16),ge(X.buffer),1}catch(e){s("emscripten_realloc_buffer: Attempted to grow heap from "+oe.byteLength+" bytes to "+t+" bytes, but got error: "+e)}}var or={};function ir(){if(!ir.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:x||"./this.program"};for(t in or)void 0===or[t]?delete e[t]:e[t]=or[t];var t,r=[];for(t in e)r.push(t+"="+e[t]);ir.strings=r}return ir.strings}function ar(e,t,r,n){e=e||this,this.parent=e,this.mount=e.mount,this.mounted=null,this.id=b.nextInode++,this.name=t,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=n}var sr=365,lr=146;function ur(e,t,r){r=0<r?r:ne(e)+1,r=new Array(r),e=te(e,r,0,r.length);return t&&(r.length=e),r}Object.defineProperties(ar.prototype,{read:{get:function(){return 365==(365&this.mode)},set:function(e){e?this.mode|=365:this.mode&=-366}},write:{get:function(){return 146==(146&this.mode)},set:function(e){e?this.mode|=146:this.mode&=-147}},isFolder:{get:function(){return b.isDir(this.mode)}},isDevice:{get:function(){return b.isChrdev(this.mode)}}}),b.FSNode=ar,b.staticInit();for(var je={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},cr=new Array(256),dr=0;dr<256;++dr)cr[dr]=String.fromCharCode(dr);We=cr,qe=g.BindingError=Xe(Error,"BindingError"),Je=g.InternalError=Xe(Error,"InternalError"),A.prototype.isAliasOf=Ze,A.prototype.clone=yt,A.prototype.delete=vt,A.prototype.isDeleted=wt,A.prototype.deleteLater=Et,g.getInheritedInstanceCount=at,g.getLiveInheritedInstances=st,g.flushPendingDeletes=ut,g.setDelayFunction=dt,C.prototype.getPointee=Pt,C.prototype.destructor=Dt,C.prototype.argPackAdvance=8,C.prototype.readValueFromPointer=Ct,C.prototype.deleteObject=Ft,C.prototype.fromWireType=mt,Mt=g.UnboundTypeError=Xe(Error,"UnboundTypeError"),g.count_emval_handles=Wt,g.get_first_emval=zt;var fr={__syscall_fcntl64:function(e,t,r){_.varargs=r;try{var n=_.getStreamFromFD(e);switch(t){case 0:return(o=_.get())<0?-28:b.createStream(n,o).fd;case 1:case 2:case 6:case 7:return 0;case 3:return n.flags;case 4:var o=_.get();return n.flags|=o,0;case 5:return o=_.get(),l[o+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return R[mr()>>2]=28,-1}}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return-e.errno;throw e}},__syscall_openat:function(e,t,r,n){_.varargs=n;try{t=_.getStr(t),t=_.calculateAt(e,t);var o=n?_.get():0;return b.open(t,r,o).fd}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return-e.errno;throw e}},_embind_register_bigint:function(e,t,r,n,o){},_embind_register_bool:function(e,r,n,o,i){var a=$e(n);S(e,{name:r=T(r),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?o:i},argPackAdvance:8,readValueFromPointer:function(e){var t;if(1===n)t=O;else if(2===n)t=l;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+r);t=R}return this.fromWireType(t[e>>a])},destructorFunction:null})},_embind_register_class:function(l,e,t,u,r,c,n,d,o,f,p,i,h){p=T(p),c=P(r,c),d=d&&P(n,d),f=f&&P(o,f),h=P(i,h);var a,m=Ge(p);r=m,n=function(){Nt("Cannot construct "+p+" due to unbound types",[u])},g.hasOwnProperty(r)?(k("Cannot register public name '"+r+"' twice"),bt(g,r,r),g.hasOwnProperty(a)&&k("Cannot register multiple overloads of a function with the same number of arguments ("+a+")!"),g[r].overloadTable[a]=n):g[r]=n,Qe([l,e,t],u?[u]:[],function(e){e=e[0],e=u?(a=e.registeredClass).instancePrototype:A.prototype;var t,r,n=Ye(m,function(){if(Object.getPrototypeOf(this)!==o)throw new qe("Use 'new' to construct "+p);if(void 0===i.constructor_body)throw new qe(p+" has no accessible constructor");var e=i.constructor_body[arguments.length];if(void 0===e)throw new qe("Tried to invoke ctor of "+p+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(i.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),o=Object.create(e,{constructor:{value:n}}),i=(n.prototype=o,new _t(p,n,o,h,a,c,d,f)),e=new C(p,i,!0,!1,!1),a=new C(p+"*",i,!1,!1,!1),s=new C(p+" const*",i,!1,!0,!1);return it[l]={pointerType:a,constPointerType:s},t=m,n=n,g.hasOwnProperty(t)||Ke("Replacing nonexistant public symbol"),g[t].overloadTable,g[t]=n,g[t].argCount=r,[e,a,s]})},_embind_register_class_constructor:function(e,n,t,r,o,i){F(0<n);var a=It(n,t);o=P(r,o),Qe([],[e],function(t){var r="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[n-1])throw new qe("Cannot register multiple constructors with identical number of parameters ("+(n-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[n-1]=()=>{Nt("Cannot construct "+t.name+" due to unbound types",a)},Qe([],a,function(e){return e.splice(1,0,null),t.registeredClass.constructor_body[n-1]=xt(r,e,null,o,i),[]}),[]})},_embind_register_class_function:function(e,i,a,t,r,s,l,u){var c=It(a,t);i=T(i),s=P(r,s),Qe([],[e],function(t){var r=(t=t[0]).name+"."+i;function e(){Nt("Cannot call "+r+" due to unbound types",c)}i.startsWith("@@")&&(i=Symbol[i.substring(2)]),u&&t.registeredClass.pureVirtualFunctions.push(i);var n=t.registeredClass.instancePrototype,o=n[i];return void 0===o||void 0===o.overloadTable&&o.className!==t.name&&o.argCount===a-2?(e.argCount=a-2,e.className=t.name,n[i]=e):(bt(n,i,r),n[i].overloadTable[a-2]=e),Qe([],c,function(e){e=xt(r,e,t,s,l);return void 0===n[i].overloadTable?(e.argCount=a-2,n[i]=e):n[i].overloadTable[a-2]=e,[]}),[]})},_embind_register_class_property:function(e,a,t,r,s,l,n,u,c,d){a=T(a),s=P(r,s),Qe([],[e],function(o){var i=(o=o[0]).name+"."+a,e={get:function(){Nt("Cannot access "+i+" due to unbound types",[t,n])},enumerable:!0,configurable:!0};return e.set=c?()=>{Nt("Cannot access "+i+" due to unbound types",[t,n])}:e=>{k(i+" is a read-only property")},Object.defineProperty(o.registeredClass.instancePrototype,a,e),Qe([],c?[t,n]:[t],function(e){var n,t=e[0],r={get:function(){var e=Bt(this,o,i+" getter");return t.fromWireType(s(l,e))},enumerable:!0};return c&&(c=P(u,c),n=e[1],r.set=function(e){var t=Bt(this,o,i+" setter"),r=[];c(d,t,n.toWireType(r,e)),Lt(r)}),Object.defineProperty(o.registeredClass.instancePrototype,a,r),[]}),[]})},_embind_register_emval:function(e,t){S(e,{name:t=T(t),fromWireType:function(e){var t=N.toValue(e);return $t(e),t},toWireType:function(e,t){return N.toHandle(t)},argPackAdvance:8,readValueFromPointer:Ct,destructorFunction:null})},_embind_register_float:function(e,t,r){r=$e(r);S(e,{name:t=T(t),fromWireType:function(e){return e},toWireType:function(e,t){if("number"!=typeof t&&"boolean"!=typeof t)throw new TypeError('Cannot convert "'+Ht(t)+'" to '+this.name);return t},argPackAdvance:8,readValueFromPointer:Vt(t,r),destructorFunction:null})},_embind_register_integer:function(e,r,t,n,o){r=T(r),-1===o&&(o=4294967295);var i,a=$e(t),s=e=>e,t=(0===n&&(i=32-8*t,s=e=>e<<i>>>i),r.includes("unsigned")),l=(e,t)=>{if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+Ht(e)+'" to '+t);if(e<n||o<e)throw new TypeError('Passing a number "'+Ht(e)+'" from JS side to C/C++ side to an argument of type "'+r+'", which is outside the valid range ['+n+", "+o+"]!")};S(e,{name:r,fromWireType:s,toWireType:t?function(e,t){return l(t,this.name),t>>>0}:function(e,t){return l(t,this.name),t},argPackAdvance:8,readValueFromPointer:Gt(r,a,0!==n),destructorFunction:null})},_embind_register_memory_view:function(e,t,r){var n=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function o(e){var t=f,r=t[e>>=2],t=t[e+1];return new n(oe,t,r)}S(e,{name:r=T(r),fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},_embind_register_std_string:function(e,t){var l="std::string"===(t=T(t));S(e,{name:t,fromWireType:function(e){var t,r=f[e>>2];if(l)for(var n=e+4,o=0;o<=r;++o){var i,a=e+4+o;o!=r&&0!=M[a]||(i=ee(n,a-n),void 0===t?t=i:t=t+String.fromCharCode(0)+i,n=a+1)}else{for(var s=new Array(r),o=0;o<r;++o)s[o]=String.fromCharCode(M[e+4+o]);t=s.join("")}return I(e),t},toWireType:function(e,t){var r="string"==typeof(t=t instanceof ArrayBuffer?new Uint8Array(t):t),n=(r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||k("Cannot pass non-string to std::string"),(l&&r?()=>ne(t):()=>t.length)()),o=pr(4+n+1);if(f[o>>2]=n,l&&r)re(t,o+4,n+1);else if(r)for(var i=0;i<n;++i){var a=t.charCodeAt(i);255<a&&(I(o),k("String has UTF-16 code units that do not fit in 8 bits")),M[o+4+i]=a}else for(i=0;i<n;++i)M[o+4+i]=t[i];return null!==e&&e.push(I,o),o},argPackAdvance:8,readValueFromPointer:Ct,destructorFunction:function(e){I(e)}})},_embind_register_std_wstring:function(e,l,o){var u,i,c,a,d;o=T(o),2===l?(u=ue,i=ce,a=de,c=()=>ie,d=1):4===l&&(u=fe,i=pe,a=he,c=()=>f,d=2),S(e,{name:o,fromWireType:function(e){for(var t,r=f[e>>2],n=c(),o=e+4,i=0;i<=r;++i){var a,s=e+4+i*l;i!=r&&0!=n[s>>d]||(a=u(o,s-o),void 0===t?t=a:t=t+String.fromCharCode(0)+a,o=s+l)}return I(e),t},toWireType:function(e,t){"string"!=typeof t&&k("Cannot pass non-string to C++ string type "+o);var r=a(t),n=pr(4+r+l);return f[n>>2]=r>>d,i(t,n+4,r+l),null!==e&&e.push(I,n),n},argPackAdvance:8,readValueFromPointer:Ct,destructorFunction:function(e){I(e)}})},_embind_register_void:function(e,t){S(e,{isVoid:!0,name:t=T(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},_emscripten_date_now:function(){return Date.now()},_emval_as:function(e,t,r){e=N.toValue(e),t=Yt(t,"emval::as");var n=[],o=N.toHandle(n);return R[r>>2]=o,t.toWireType(n,e)},_emval_call_void_method:function(e,t,r,n){(e=qt[e])(t=N.toValue(t),r=void 0===(t=Xt[e=r])?T(e):t,null,n)},_emval_decref:$t,_emval_get_method_caller:function(e,t){var r=function(e,t){for(var r=new Array(e),n=0;n<e;++n)r[n]=Yt(R[(t>>2)+n],"parameter "+n);return r}(e,t),t=r[0],n=t.name+"_$"+r.slice(1).map(function(e){return e.name}).join("_")+"$",o=Jt[n];if(void 0!==o)return o;for(var i=["retType"],a=[t],s="",l=0;l<e-1;++l)s+=(0!==l?", ":"")+"arg"+l,i.push("argType"+l),a.push(r[1+l]);for(var u="return function "+Ge("methodCaller_"+n)+"(handle, name, destructors, args) {\n",c=0,l=0;l<e-1;++l)u+="    var arg"+l+" = argType"+l+".readValueFromPointer(args"+(c?"+"+c:"")+");\n",c+=r[l+1].argPackAdvance;for(u+="    var rv = handle[name]("+s+");\n",l=0;l<e-1;++l)r[l+1].deleteObject&&(u+="    argType"+l+".deleteObject(arg"+l+");\n");t.isVoid||(u+="    return retType.toWireType(destructors, rv);\n"),i.push(u+="};\n");var t=Ut(Function,i).apply(null,a),d=qt.length;return qt.push(t),Jt[n]=o=d},_emval_incref:function(e){4<e&&(D[e].refcount+=1)},_emval_run_destructors:function(e){Lt(N.toValue(e)),$t(e)},_emval_take_value:function(e,t){e=(e=Yt(e,"_emval_take_value")).readValueFromPointer(t);return N.toHandle(e)},_gmtime_js:function(e,t){var e=new Date(1e3*R[e>>2]),r=(R[t>>2]=e.getUTCSeconds(),R[t+4>>2]=e.getUTCMinutes(),R[t+8>>2]=e.getUTCHours(),R[t+12>>2]=e.getUTCDate(),R[t+16>>2]=e.getUTCMonth(),R[t+20>>2]=e.getUTCFullYear()-1900,R[t+24>>2]=e.getUTCDay(),Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0)),e=(e.getTime()-r)/864e5|0;R[t+28>>2]=e},_localtime_js:function(e,t){var e=new Date(1e3*R[e>>2]),r=(R[t>>2]=e.getSeconds(),R[t+4>>2]=e.getMinutes(),R[t+8>>2]=e.getHours(),R[t+12>>2]=e.getDate(),R[t+16>>2]=e.getMonth(),R[t+20>>2]=e.getFullYear()-1900,R[t+24>>2]=e.getDay(),new Date(e.getFullYear(),0,1)),n=(e.getTime()-r.getTime())/864e5|0,n=(R[t+28>>2]=n,R[t+36>>2]=-60*e.getTimezoneOffset(),new Date(e.getFullYear(),6,1).getTimezoneOffset()),r=r.getTimezoneOffset(),e=0|(n!=r&&e.getTimezoneOffset()==Math.min(r,n));R[t+32>>2]=e},_mktime_js:function(e){var t=new Date(R[e+20>>2]+1900,R[e+16>>2],R[e+12>>2],R[e+8>>2],R[e+4>>2],R[e>>2],0),r=R[e+32>>2],n=t.getTimezoneOffset(),o=new Date(t.getFullYear(),0,1),i=new Date(t.getFullYear(),6,1).getTimezoneOffset(),a=o.getTimezoneOffset(),s=Math.min(a,i),r=(r<0?R[e+32>>2]=Number(i!=a&&s==n):0<r!=(s==n)&&(a=Math.max(a,i),i=0<r?s:a,t.setTime(t.getTime()+6e4*(i-n))),R[e+24>>2]=t.getDay(),(t.getTime()-o.getTime())/864e5|0);return R[e+28>>2]=r,R[e>>2]=t.getSeconds(),R[e+4>>2]=t.getMinutes(),R[e+8>>2]=t.getHours(),R[e+12>>2]=t.getDate(),R[e+16>>2]=t.getMonth(),t.getTime()/1e3|0},_tzset_js:function e(t,r,n){function o(e){e=e.toTimeString().match(/\(([A-Za-z ]+)\)$/);return e?e[1]:"GMT"}var i,a,s,l,u;e.called||(e.called=!0,t=t,r=r,n=n,a=(new Date).getFullYear(),i=new Date(a,0,1),a=new Date(a,6,1),s=i.getTimezoneOffset(),l=a.getTimezoneOffset(),u=Math.max(s,l),R[t>>2]=60*u,R[r>>2]=Number(s!=l),t=o(i),u=o(a),r=me(t),i=me(u),l<s?(R[n>>2]=r,R[n+4>>2]=i):(R[n>>2]=i,R[n+4>>2]=r))},abort:function(){h("native code called abort()")},emscripten_log:function(e,t,r){rr(e,i(er(t,r),0))},emscripten_resize_heap:function(e){var t=M.length;F((e>>>=0)>t);var r=2147483648;if(r<e)return s("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is 2147483648 bytes!"),!1;for(var n=1;n<=4;n*=2){var o=t*(1+.2/n),o=Math.min(o,e+100663296),i=Math.min(r,(o=Math.max(e,o))+(65536-o%65536)%65536);if(nr(i))return!0}return s("Failed to grow the heap from "+t+" bytes to "+i+" bytes, not enough memory!"),!1},environ_get:function(a,s){var l=0;return ir().forEach(function(e,t){for(var r=s+l,n=(R[a+4*t>>2]=r,e),o=r,i=0;i<n.length;++i)F(n.charCodeAt(i)===(255&n.charCodeAt(i))),O[o++>>0]=n.charCodeAt(i);O[o>>0]=0,l+=e.length+1}),0},environ_sizes_get:function(e,t){var r=ir(),n=(R[e>>2]=r.length,0);return r.forEach(function(e){n+=e.length+1}),R[t>>2]=n,0},fd_close:function(e){try{var t=_.getStreamFromFD(e);return b.close(t),0}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return e.errno;throw e}},fd_fdstat_get:function(e,t){try{var r=_.getStreamFromFD(e),n=r.tty?2:b.isDir(r.mode)?3:b.isLink(r.mode)?7:4;return O[t>>0]=n,0}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return e.errno;throw e}},fd_read:function(e,t,r,n){try{var o=_.getStreamFromFD(e),i=_.doReadv(o,t,r);return R[n>>2]=i,0}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return e.errno;throw e}},fd_seek:function(e,t,r,n,o){try{var i=_.getStreamFromFD(e),a=4294967296*r+(t>>>0),s=9007199254740992;return a<=-s||s<=a?-61:(b.llseek(i,a,n),d=[i.position>>>0,(c=i.position,1<=+Math.abs(c)?0<c?(0|Math.min(+Math.floor(c/4294967296),4294967295))>>>0:~~+Math.ceil((c-(~~c>>>0))/4294967296)>>>0:0)],R[o>>2]=d[0],R[o+4>>2]=d[1],i.getdents&&0==a&&0===n&&(i.getdents=null),0)}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return e.errno;throw e}},fd_write:function(e,t,r,n){try{var o=_.getStreamFromFD(e),i=_.doWritev(o,t,r);return R[n>>2]=i,0}catch(e){if(void 0!==b&&e instanceof b.ErrnoError)return e.errno;throw e}},setTempRet0:function(e){}},I=(function(){var t={env:fr,wasi_snapshot_preview1:fr};function r(e,t){var e=e.exports;g.asm=e,F(X=g.asm.memory,"memory not found in wasm exports"),ge(X.buffer),F(ye=g.asm.__indirect_function_table,"table not found in wasm exports"),e=g.asm.__wasm_call_ctors,be.unshift(e),De("wasm-instantiate")}Pe("wasm-instantiate");var n=g;function o(e){F(g===n,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),n=null,r(e.instance)}function i(e){return function(){if(!Y&&(B||u)){if("function"==typeof fetch&&!Oe(a))return fetch(a,{credentials:"same-origin"}).then(function(e){if(e.ok)return e.arrayBuffer();throw"failed to load wasm binary file at '"+a+"'"}).catch(function(){return Me(a)});if(W)return new Promise(function(t,e){W(a,function(e){t(new Uint8Array(e))},e)})}return Promise.resolve().then(function(){return Me(a)})}().then(function(e){return WebAssembly.instantiate(e,t)}).then(function(e){return e}).then(e,function(e){s("failed to asynchronously prepare wasm: "+e),Oe(a)&&s("warning: Loading from a file URI ("+a+") is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing"),h(e)})}if(g.instantiateWasm)try{return g.instantiateWasm(t,r)}catch(t){return s("Module.instantiateWasm callback failed with error: "+t)}Y||"function"!=typeof WebAssembly.instantiateStreaming||Fe(a)||Oe(a)||"function"!=typeof fetch?i(o):fetch(a,{credentials:"same-origin"}).then(function(e){return WebAssembly.instantiateStreaming(e,t).then(o,function(e){return s("wasm streaming compile failed: "+e),s("falling back to ArrayBuffer instantiation"),i(o)})})}(),g.___wasm_call_ctors=m("__wasm_call_ctors"),g._free=m("free")),pr=g._malloc=m("malloc"),hr=g._strlen=m("strlen"),mr=g.___errno_location=m("__errno_location"),gr=g.___getTypeName=m("__getTypeName"),yr=(g.___embind_register_native_and_builtin_types=m("__embind_register_native_and_builtin_types"),g.___stdio_exit=m("__stdio_exit")),vr=g._emscripten_builtin_memalign=m("emscripten_builtin_memalign"),wr=g._emscripten_stack_init=function(){return(wr=g._emscripten_stack_init=g.asm.emscripten_stack_init).apply(null,arguments)};g._emscripten_stack_get_free=function(){return(g._emscripten_stack_get_free=g.asm.emscripten_stack_get_free).apply(null,arguments)},g._emscripten_stack_get_base=function(){return(g._emscripten_stack_get_base=g.asm.emscripten_stack_get_base).apply(null,arguments)};var Er,br=g._emscripten_stack_get_end=function(){return(br=g._emscripten_stack_get_end=g.asm.emscripten_stack_get_end).apply(null,arguments)};function _r(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function Tr(e){function t(){if(!Er&&(Er=!0,g.calledRun=!0,!Q)){if(we(),F(!Te),Te=!0,g.noFSInit||b.init.initialized||b.init(),b.ignorePermissions=!1,Re(be),g.onRuntimeInitialized&&g.onRuntimeInitialized(),F(!g._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),we(),g.postRun)for("function"==typeof g.postRun&&(g.postRun=[g.postRun]);g.postRun.length;)e=g.postRun.shift(),_e.unshift(e);var e;Re(_e)}}if(!(0<p)){if(wr(),ve(),g.preRun)for("function"==typeof g.preRun&&(g.preRun=[g.preRun]);g.preRun.length;)r=g.preRun.shift(),Ee.unshift(r);var r;Re(Ee),0<p||(g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),t()},1)):t(),we())}}if(g.stackSave=m("stackSave"),g.stackRestore=m("stackRestore"),g.stackAlloc=m("stackAlloc"),g.dynCall_ijiii=m("dynCall_ijiii"),g.dynCall_viiijj=m("dynCall_viiijj"),g.dynCall_jij=m("dynCall_jij"),g.dynCall_jii=m("dynCall_jii"),g.dynCall_jiji=m("dynCall_jiji"),o("intArrayFromString",!(g._ff_h264_cabac_tables=112940)),o("intArrayToString",!1),o("ccall",!1),o("cwrap",!1),o("setValue",!1),o("getValue",!1),o("allocate",!1),o("UTF8ArrayToString",!1),o("UTF8ToString",!1),o("stringToUTF8Array",!1),o("stringToUTF8",!1),o("lengthBytesUTF8",!1),o("stackTrace",!1),o("addOnPreRun",!1),o("addOnInit",!1),o("addOnPreMain",!1),o("addOnExit",!1),o("addOnPostRun",!1),o("writeStringToMemory",!1),o("writeArrayToMemory",!1),o("writeAsciiToMemory",!1),o("addRunDependency",!0),o("removeRunDependency",!0),o("FS_createFolder",!1),o("FS_createPath",!0),o("FS_createDataFile",!0),o("FS_createPreloadedFile",!0),o("FS_createLazyFile",!0),o("FS_createLink",!1),o("FS_createDevice",!0),o("FS_unlink",!0),o("getLEB",!1),o("getFunctionTables",!1),o("alignFunctionTables",!1),o("registerFunctions",!1),o("addFunction",!1),o("removeFunction",!1),o("prettyPrint",!1),o("dynCall",!1),o("getCompilerSetting",!1),o("print",!1),o("printErr",!1),o("getTempRet0",!1),o("setTempRet0",!1),o("callMain",!1),o("abort",!1),o("keepRuntimeAlive",!1),o("ptrToString",!1),o("zeroMemory",!1),o("stringToNewUTF8",!1),o("emscripten_realloc_buffer",!1),o("ENV",!1),o("ERRNO_CODES",!1),o("ERRNO_MESSAGES",!1),o("setErrNo",!1),o("inetPton4",!1),o("inetNtop4",!1),o("inetPton6",!1),o("inetNtop6",!1),o("readSockaddr",!1),o("writeSockaddr",!1),o("DNS",!1),o("getHostByName",!1),o("Protocols",!1),o("Sockets",!1),o("getRandomDevice",!1),o("traverseStack",!1),o("UNWIND_CACHE",!1),o("convertPCtoSourceLocation",!1),o("readAsmConstArgsArray",!1),o("readAsmConstArgs",!1),o("mainThreadEM_ASM",!1),o("jstoi_q",!1),o("jstoi_s",!1),o("getExecutableName",!1),o("listenOnce",!1),o("autoResumeAudioContext",!1),o("dynCallLegacy",!1),o("getDynCaller",!1),o("dynCall",!1),o("setWasmTableEntry",!1),o("getWasmTableEntry",!1),o("handleException",!1),o("runtimeKeepalivePush",!1),o("runtimeKeepalivePop",!1),o("callUserCallback",!1),o("maybeExit",!1),o("safeSetTimeout",!1),o("asmjsMangle",!1),o("asyncLoad",!1),o("alignMemory",!1),o("mmapAlloc",!1),o("reallyNegative",!1),o("unSign",!1),o("reSign",!1),o("formatString",!1),o("PATH",!1),o("PATH_FS",!1),o("SYSCALLS",!1),o("getSocketFromFD",!1),o("getSocketAddress",!1),o("JSEvents",!1),o("registerKeyEventCallback",!1),o("specialHTMLTargets",!1),o("maybeCStringToJsString",!1),o("findEventTarget",!1),o("findCanvasEventTarget",!1),o("getBoundingClientRect",!1),o("fillMouseEventData",!1),o("registerMouseEventCallback",!1),o("registerWheelEventCallback",!1),o("registerUiEventCallback",!1),o("registerFocusEventCallback",!1),o("fillDeviceOrientationEventData",!1),o("registerDeviceOrientationEventCallback",!1),o("fillDeviceMotionEventData",!1),o("registerDeviceMotionEventCallback",!1),o("screenOrientation",!1),o("fillOrientationChangeEventData",!1),o("registerOrientationChangeEventCallback",!1),o("fillFullscreenChangeEventData",!1),o("registerFullscreenChangeEventCallback",!1),o("registerRestoreOldStyle",!1),o("hideEverythingExceptGivenElement",!1),o("restoreHiddenElements",!1),o("setLetterbox",!1),o("currentFullscreenStrategy",!1),o("restoreOldWindowedStyle",!1),o("softFullscreenResizeWebGLRenderTarget",!1),o("doRequestFullscreen",!1),o("fillPointerlockChangeEventData",!1),o("registerPointerlockChangeEventCallback",!1),o("registerPointerlockErrorEventCallback",!1),o("requestPointerLock",!1),o("fillVisibilityChangeEventData",!1),o("registerVisibilityChangeEventCallback",!1),o("registerTouchEventCallback",!1),o("fillGamepadEventData",!1),o("registerGamepadEventCallback",!1),o("registerBeforeUnloadEventCallback",!1),o("fillBatteryEventData",!1),o("battery",!1),o("registerBatteryEventCallback",!1),o("setCanvasElementSize",!1),o("getCanvasElementSize",!1),o("demangle",!1),o("demangleAll",!1),o("jsStackTrace",!1),o("stackTrace",!1),o("getEnvStrings",!1),o("checkWasiClock",!1),o("writeI53ToI64",!1),o("writeI53ToI64Clamped",!1),o("writeI53ToI64Signaling",!1),o("writeI53ToU64Clamped",!1),o("writeI53ToU64Signaling",!1),o("readI53FromI64",!1),o("readI53FromU64",!1),o("convertI32PairToI53",!1),o("convertU32PairToI53",!1),o("dlopenMissingError",!1),o("setImmediateWrapped",!1),o("clearImmediateWrapped",!1),o("polyfillSetImmediate",!1),o("uncaughtExceptionCount",!1),o("exceptionLast",!1),o("exceptionCaught",!1),o("ExceptionInfo",!1),o("exception_addRef",!1),o("exception_decRef",!1),o("Browser",!1),o("setMainLoop",!1),o("wget",!1),o("FS",!1),o("MEMFS",!1),o("TTY",!1),o("PIPEFS",!1),o("SOCKFS",!1),o("_setNetworkCallback",!1),o("tempFixedLengthArray",!1),o("miniTempWebGLFloatBuffers",!1),o("heapObjectForWebGLType",!1),o("heapAccessShiftForWebGLHeap",!1),o("GL",!1),o("emscriptenWebGLGet",!1),o("computeUnpackAlignedImageSize",!1),o("emscriptenWebGLGetTexPixelData",!1),o("emscriptenWebGLGetUniform",!1),o("webglGetUniformLocation",!1),o("webglPrepareUniformLocationsBeforeFirstUse",!1),o("webglGetLeftBracePos",!1),o("emscriptenWebGLGetVertexAttrib",!1),o("writeGLArray",!1),o("AL",!1),o("SDL_unicode",!1),o("SDL_ttfContext",!1),o("SDL_audio",!1),o("SDL",!1),o("SDL_gfx",!1),o("GLUT",!1),o("EGL",!1),o("GLFW_Window",!1),o("GLFW",!1),o("GLEW",!1),o("IDBStore",!1),o("runAndAbortIfError",!1),o("InternalError",!1),o("BindingError",!1),o("UnboundTypeError",!1),o("PureVirtualError",!1),o("init_embind",!1),o("throwInternalError",!1),o("throwBindingError",!1),o("throwUnboundTypeError",!1),o("ensureOverloadTable",!1),o("exposePublicSymbol",!1),o("replacePublicSymbol",!1),o("extendError",!1),o("createNamedFunction",!1),o("registeredInstances",!1),o("getBasestPointer",!1),o("registerInheritedInstance",!1),o("unregisterInheritedInstance",!1),o("getInheritedInstance",!1),o("getInheritedInstanceCount",!1),o("getLiveInheritedInstances",!1),o("registeredTypes",!1),o("awaitingDependencies",!1),o("typeDependencies",!1),o("registeredPointers",!1),o("registerType",!1),o("whenDependentTypesAreResolved",!1),o("embind_charCodes",!1),o("embind_init_charCodes",!1),o("readLatin1String",!1),o("getTypeName",!1),o("heap32VectorToArray",!1),o("requireRegisteredType",!1),o("getShiftFromSize",!1),o("integerReadValueFromPointer",!1),o("enumReadValueFromPointer",!1),o("floatReadValueFromPointer",!1),o("simpleReadValueFromPointer",!1),o("runDestructors",!1),o("new_",!1),o("craftInvokerFunction",!1),o("embind__requireFunction",!1),o("tupleRegistrations",!1),o("structRegistrations",!1),o("genericPointerToWireType",!1),o("constNoSmartPtrRawPointerToWireType",!1),o("nonConstNoSmartPtrRawPointerToWireType",!1),o("init_RegisteredPointer",!1),o("RegisteredPointer",!1),o("RegisteredPointer_getPointee",!1),o("RegisteredPointer_destructor",!1),o("RegisteredPointer_deleteObject",!1),o("RegisteredPointer_fromWireType",!1),o("runDestructor",!1),o("releaseClassHandle",!1),o("finalizationRegistry",!1),o("detachFinalizer_deps",!1),o("detachFinalizer",!1),o("attachFinalizer",!1),o("makeClassHandle",!1),o("init_ClassHandle",!1),o("ClassHandle",!1),o("ClassHandle_isAliasOf",!1),o("throwInstanceAlreadyDeleted",!1),o("ClassHandle_clone",!1),o("ClassHandle_delete",!1),o("deletionQueue",!1),o("ClassHandle_isDeleted",!1),o("ClassHandle_deleteLater",!1),o("flushPendingDeletes",!1),o("delayFunction",!1),o("setDelayFunction",!1),o("RegisteredClass",!1),o("shallowCopyInternalPointer",!1),o("downcastPointer",!1),o("upcastPointer",!1),o("validateThis",!1),o("char_0",!1),o("char_9",!1),o("makeLegalFunctionName",!1),o("emval_handle_array",!1),o("emval_free_list",!1),o("emval_symbols",!1),o("init_emval",!1),o("count_emval_handles",!1),o("get_first_emval",!1),o("getStringOrSymbol",!1),o("Emval",!1),o("emval_newers",!1),o("craftEmvalAllocator",!1),o("emval_get_global",!1),o("emval_methodCallers",!1),o("emval_registeredMethods",!1),o("warnOnce",!1),o("stackSave",!1),o("stackRestore",!1),o("stackAlloc",!1),o("AsciiToString",!1),o("stringToAscii",!1),o("UTF16ToString",!1),o("stringToUTF16",!1),o("lengthBytesUTF16",!1),o("UTF32ToString",!1),o("stringToUTF32",!1),o("lengthBytesUTF32",!1),o("allocateUTF8",!1),o("allocateUTF8OnStack",!1),g.writeStackCookie=ve,g.checkStackCookie=we,K("ALLOC_NORMAL",!1),K("ALLOC_STACK",!1),Se=function e(){Er||Tr(),Er||(Se=e)},g.run=Tr,g.preInit)for("function"==typeof g.preInit&&(g.preInit=[g.preInit]);0<g.preInit.length;)g.preInit.pop()();return Tr(),U.exports=g,L.exports}();const f="player",p="playbackTF",h={playType:f,videoBuffer:1e3,videoBufferDelay:1e3,isResize:!0,isFullResize:!1,isFlv:!1,isHls:!1,isWebrtc:!1,debug:!1,hotKey:!1,loadingTimeout:10,heartTimeout:10,timeout:10,loadingTimeoutReplay:!1,heartTimeoutReplay:!1,loadingTimeoutReplayTimes:3,heartTimeoutReplayTimes:3,supportDblclickFullscreen:!1,showBandwidth:!1,keepScreenOn:!1,isNotMute:!1,hasAudio:!0,hasVideo:!0,operateBtns:{fullscreen:!1,screenshot:!1,play:!1,audio:!1,record:!1},watermarkConfig:{},controlAutoHide:!1,hasControl:!1,loadingText:"",background:"",decoder:"decoder.js",url:"",rotate:0,playbackConfig:{playList:[],fps:""},forceNoOffscreen:!0,hiddenAutoPause:!1,protocol:2,demuxType:"flv",useWasm:!1,useWCS:!1,wcsUseVideoRender:!1,wasmUseVideoRender:!1,useMSE:!1,useOffscreen:!1,autoWasm:!0,wasmDecodeErrorReplay:!0,openWebglAlignment:!1,playbackDelayTime:1e3,playbackFps:20,playbackForwardMaxRateDecodeIFrame:4},y="initVideo",v="render",w="playAudio",E="workerFetch",b={init:"init",decode:"decode",audioDecode:"audioDecode",videoDecode:"videoDecode",close:"close",updateConfig:"updateConfig",resetDecode:"resetDecode",resetAudioDecode:"resetAudioDecode",resetVideoDecode:"resetVideoDecode"},_="streamSuccess",T="fetchError";function k(){return(performance&&"function"==typeof performance.now?performance:Date).now()}try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var o=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(o instanceof WebAssembly.Module)new WebAssembly.Instance(o),WebAssembly.Instance}}catch(e){}e=window.navigator.userAgent;/^((?!chrome|android).)*safari/i.test(e),/MicroMessenger/i.test(e);const i=[[Uint8Array,Int8Array],[Uint16Array,Int16Array],[Uint32Array,Int32Array,Float32Array],[Float64Array]],a=Symbol(32),s=Symbol(16),l=Symbol(8),u=new Map;i.forEach((e,t)=>e.forEach(e=>u.set(e,t)));class S{constructor(e){this.g=e,this.consumed=0,e&&(this.need=e.next().value)}fillFromReader(r){return e=this,l=function*(){var{done:e,value:t}=yield r.read();return e?void this.close():(this.write(t),this.fillFromReader(r))},new(s=(s=a=void 0)||Promise)(function(r,t){function n(e){try{i(l.next(e))}catch(e){t(e)}}function o(e){try{i(l.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((l=l.apply(e,a||[])).next())});var e,a,s,l}consume(){this.buffer&&this.consumed&&(this.buffer.copyWithin(0,this.consumed),this.buffer=this.buffer.subarray(0,this.buffer.length-this.consumed),this.consumed=0)}demand(e,t){return t&&this.consume(),this.need=e,this.flush()}read(r){return new Promise((t,e)=>{if(this.resolve)return e("last read not complete yet");this.resolve=e=>{delete this.resolve,delete this.need,t(e)},this.demand(r,!0)})}readU32(){return this.read(a)}readU16(){return this.read(s)}readU8(){return this.read(l)}close(){this.g&&this.g.return()}flush(){if(this.buffer&&this.need){let e=null;const n=this.buffer.subarray(this.consumed);let t=0;var r=e=>n.length<(t=e);if("number"==typeof this.need){if(r(this.need))return;e=n.subarray(0,t)}else if(this.need instanceof ArrayBuffer){if(r(this.need.byteLength))return;new Uint8Array(this.need).set(n.subarray(0,t)),e=this.need}else if(this.need===a){if(r(4))return;e=n[0]<<24|n[1]<<16|n[2]<<8|n[3]}else if(this.need===s){if(r(2))return;e=n[0]<<8|n[1]}else if(this.need===l){if(r(1))return;e=n[0]}else if(u.has(this.need.constructor)){if(r(this.need.length<<u.get(this.need.constructor)))return;new Uint8Array(this.need.buffer,this.need.byteOffset).set(n.subarray(0,t)),e=this.need}else if(this.g)return void this.g.throw(new Error("Unsupported type"));return this.consumed+=t,this.g?this.demand(this.g.next(e).value,!0):this.resolve&&this.resolve(e),e}}write(e){e instanceof ArrayBuffer?this.malloc(e.byteLength).set(new Uint8Array(e)):this.malloc(e.byteLength).set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),(this.g||this.resolve)&&this.flush()}writeU32(e){this.malloc(4).set([e>>24&255,e>>16&255,e>>8&255,255&e]),this.flush()}writeU16(e){this.malloc(2).set([e>>8&255,255&e]),this.flush()}writeU8(e){this.malloc(1)[0]=e,this.flush()}malloc(e){if(this.buffer){var t=this.buffer.length,r=t+e;if(r<=this.buffer.buffer.byteLength-this.buffer.byteOffset)this.buffer=new Uint8Array(this.buffer.buffer,this.buffer.byteOffset,r);else{const e=new Uint8Array(r);e.set(this.buffer),this.buffer=e}return this.buffer.subarray(t,r)}return this.buffer=new Uint8Array(e),this.buffer}}S.U32=a,S.U16=s,S.U8=l,Date.now||(Date.now=function(){return(new Date).getTime()}),g.postRun=function(){function r(){i&&(i.abort(),i=null)}var n=[],d=[],o={},i=new AbortController,a=null,s=null,l=null,m=("VideoEncoder"in self&&(o={hasInit:!1,isEmitInfo:!1,offscreenCanvas:null,offscreenCanvasCtx:null,decoder:new VideoDecoder({output:function(e){o.isEmitInfo||(m.opt.debug&&console.log("Jessibuca: [worker] Webcodecs Video Decoder initSize"),postMessage({cmd:y,w:e.codedWidth,h:e.codedHeight}),o.isEmitInfo=!0,o.offscreenCanvas=new OffscreenCanvas(e.codedWidth,e.codedHeight),o.offscreenCanvasCtx=o.offscreenCanvas.getContext("2d")),o.offscreenCanvasCtx.drawImage(e,0,0,e.codedWidth,e.codedHeight);var t=o.offscreenCanvas.transferToImageBitmap();postMessage({cmd:v,buffer:t,delay:m.delay,ts:0},[t]),setTimeout(function(){e.close?e.close():e.destroy()},100)},error:function(e){console.error(e)}}),decode:function(e,t){const r=e[0]>>4==1;if(o.hasInit){t=new EncodedVideoChunk({data:e.slice(5),timestamp:t,type:r?"key":"delta"});o.decoder.decode(t)}else if(r&&0===e[1]){const t=15&e[0],r=(m.setVideoCodec(t),function(e){let r=e.subarray(1,4),n="avc1.";for(let t=0;t<3;t++){let e=r[t].toString(16);e.length<2&&(e="0"+e),n+=e}return{codec:n,description:e}}(e.slice(5)));o.decoder.configure(r),o.hasInit=!0}},reset(){o.hasInit=!1,o.isEmitInfo=!1,o.offscreenCanvas=null,o.offscreenCanvasCtx=null}}),{opt:{debug:h.debug,forceNoOffscreen:h.forceNoOffscreen,useWCS:h.useWCS,videoBuffer:h.videoBuffer,videoBufferDelay:h.videoBufferDelay,openWebglAlignment:h.openWebglAlignment,playType:h.playType,hasAudio:h.hasAudio},useOffscreen:function(){return!m.opt.forceNoOffscreen&&"undefined"!=typeof OffscreenCanvas},initAudioPlanar:function(l,e){postMessage({cmd:"initAudio",sampleRate:e,channels:l});var u=[],c=0;this.playAudioPlanar=function(e,t,r){for(var n=t,o=[],i=0,a=0;a<2;a++){var s=g.HEAPU32[(e>>2)+a]>>2;o[a]=g.HEAPF32.subarray(s,s+n)}if(c){if(!(n>=(t=1024-c)))return c+=n,d[0]=Float32Array.of(...d[0],...o[0]),void(2==l&&(d[1]=Float32Array.of(...d[1],...o[1])));u[0]=Float32Array.of(...d[0],...o[0].subarray(0,t)),2==l&&(u[1]=Float32Array.of(...d[1],...o[1].subarray(0,t))),postMessage({cmd:w,buffer:u,ts:r},u.map(e=>e.buffer)),n-=i=t}for(c=n;1024<=c;c-=1024)u[0]=o[0].slice(i,i+=1024),2==l&&(u[1]=o[1].slice(i-1024,i)),postMessage({cmd:w,buffer:u,ts:r},u.map(e=>e.buffer));c&&(d[0]=o[0].slice(i),2==l&&(d[1]=o[1].slice(i)))}},setVideoCodec:function(e){postMessage({cmd:"videoCode",code:e})},setAudioCodec:function(e){postMessage({cmd:"audioCode",code:e})},setVideoSize:function(o,i){postMessage({cmd:y,w:o,h:i});var a,e,t,r,n,s,l,u,c,d,f=o*i,p=f>>2;function h(e,t){var r=a.createTexture();return a.bindTexture(a.TEXTURE_2D,r),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindTexture(a.TEXTURE_2D,null),a.uniform1i(a.getUniformLocation(n,e),t),r}m.useOffscreen()?(this.offscreenCanvas=new OffscreenCanvas(o,i),this.offscreenCanvasGL=this.offscreenCanvas.getContext("webgl"),this.webglObj=(a=this.offscreenCanvasGL,e=m.opt.openWebglAlignment,t=["attribute vec4 vertexPos;","attribute vec4 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos.xy;","}"].join("\n"),r=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n"),e&&a.pixelStorei(a.UNPACK_ALIGNMENT,1),e=a.createShader(a.VERTEX_SHADER),a.shaderSource(e,t),a.compileShader(e),a.getShaderParameter(e,a.COMPILE_STATUS)||console.log("Vertex shader failed to compile: "+a.getShaderInfoLog(e)),t=a.createShader(a.FRAGMENT_SHADER),a.shaderSource(t,r),a.compileShader(t),a.getShaderParameter(t,a.COMPILE_STATUS)||console.log("Fragment shader failed to compile: "+a.getShaderInfoLog(t)),n=a.createProgram(),a.attachShader(n,e),a.attachShader(n,t),a.linkProgram(n),a.getProgramParameter(n,a.LINK_STATUS)||console.log("Program failed to compile: "+a.getProgramInfoLog(n)),a.useProgram(n),s=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),a.STATIC_DRAW),r=a.getAttribLocation(n,"vertexPos"),a.enableVertexAttribArray(r),a.vertexAttribPointer(r,2,a.FLOAT,!1,0,0),l=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,l),a.bufferData(a.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),a.STATIC_DRAW),e=a.getAttribLocation(n,"texturePos"),a.enableVertexAttribArray(e),a.vertexAttribPointer(e,2,a.FLOAT,!1,0,0),u=h("ySampler",0),c=h("uSampler",1),d=h("vSampler",2),{render:function(e,t,r,n,o){a.viewport(0,0,e,t),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,u),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e,t,0,a.LUMINANCE,a.UNSIGNED_BYTE,r),a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,c),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,n),a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,d),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,o),a.drawArrays(a.TRIANGLE_STRIP,0,4)},destroy:function(){try{a.deleteProgram(n),a.deleteBuffer(s),a.deleteBuffer(l),a.deleteTexture(u),a.deleteTexture(c),a.deleteBuffer(d)}catch(e){}}}),this.draw=function(e,t,r,n){this.webglObj.render(o,i,g.HEAPU8.subarray(t,t+f),g.HEAPU8.subarray(r,r+p),g.HEAPU8.subarray(n,n+p));t=this.offscreenCanvas.transferToImageBitmap();postMessage({cmd:v,buffer:t,delay:this.delay,ts:e},[t])}):this.draw=function(e,t,r,n){t=[g.HEAPU8.subarray(t,t+f),g.HEAPU8.subarray(r,r+p),g.HEAPU8.subarray(n,n+p)].map(e=>Uint8Array.from(e));postMessage({cmd:v,output:t,delay:this.delay,ts:e},t.map(e=>e.buffer))}},getDelay:function(e){return e?(this.firstTimestamp?e&&(t=Date.now()-this.startTimestamp,r=e-this.firstTimestamp,this.delay=r<=t?t-r:r-t):(this.firstTimestamp=e,this.startTimestamp=Date.now(),this.delay=-1),this.delay):-1;var t,r},resetDelay:function(){this.firstTimestamp=null,this.startTimestamp=null,this.delay=-1},init:function(){m.opt.debug&&console.log("Jessibuca: [worker] init");const t=e=>{(m.opt.useWCS&&m.useOffscreen()&&2===e.type&&o.decode?o:e.decoder).decode(e.payload,e.ts)};this.stopId=setInterval(()=>{if(n.length)if(this.dropping){for(m.opt.debug&&console.log("Jessibuca: [worker]: loop is dropping"),1===(e=n.shift()).type&&0===e.payload[1]&&t(e);!e.isIFrame&&n.length;)m.opt.debug&&console.log("Jessibuca: [worker]: loop is dropping = true, isIFrame is",e.isIFrame),1===(e=n.shift()).type&&0===e.payload[1]&&t(e);e.isIFrame&&(this.dropping=!1,t(e))}else{var e=n[0];if(-1===this.getDelay(e.ts))m.opt.debug&&console.log("Jessibuca: [worker]: common dumex delay is -1"),n.shift(),t(e);else if(this.delay>m.opt.videoBuffer+m.opt.videoBufferDelay)m.opt.debug&&console.log("Jessibuca: [worker]:",`delay is ${this.delay}, set dropping is true`),this.resetDelay(),this.dropping=!0;else for(;n.length&&(e=n[0],this.getDelay(e.ts)>m.opt.videoBuffer);)n.shift(),t(e)}},10)},close:function(){m.opt.debug&&console.log("Jessibuca: [worker]: close"),clearInterval(this.stopId),this.stopId=null,u.clear(),c.clear(),o.reset&&o.reset(),this.firstTimestamp=null,this.startTimestamp=null,this.delay=-1,this.dropping=!1,this.webglObj&&(this.webglObj.destroy(),this.offscreenCanvas=null,this.offscreenCanvasGL=null,this.offscreenCanvasCtx=null),n=[],d=[],i=null,a&&(a.close(),a=null),delete this.playAudioPlanar,delete this.draw},pushBuffer:function(e,t){1===t.type?n.push({ts:t.ts,payload:e,decoder:u,type:1}):2===t.type&&n.push({ts:t.ts,payload:e,decoder:c,type:2,isIFrame:t.isIFrame})},fetchStream:function(e,t){m.opt.debug&&console.log("Jessibuca: [worker]: fetchStream, url is "+e,"options:",t),s=function(){let r=0,n=k();return e=>{r+=e;var e=k(),t=e-n;1e3<=t&&(t=r/t*1e3,postMessage({cmd:E,type:"streamRate",value:t}),n=e,r=0)}}(),2===t.protocol?(l=new S(m.demuxFlv()),fetch(e,{signal:i.signal}).then(e=>{postMessage({cmd:E,type:_}),e.body.pipeTo(new WritableStream({write:e=>(s(e.byteLength),l.write(e)),close:()=>{l=null},abort:e=>{l=null,postMessage({cmd:E,type:T,value:e.toString()}),r()}}))}).catch(e=>{postMessage({cmd:E,type:T,value:e.toString()}),r()})):1===t.protocol&&((a=new WebSocket(e)).binaryType="arraybuffer",a.onopen=()=>{m.opt.debug&&console.log("Jessibuca: [worker]: fetchStream, WebsocketStream  socket open"),postMessage({cmd:E,type:_})},a.onclose=()=>{m.opt.debug&&console.log("Jessibuca: [worker]: fetchStream, WebsocketStream  socket close"),postMessage({cmd:E,type:"streamEnd"})},a.onerror=e=>{m.opt.debug&&console.log("Jessibuca: [worker]: fetchStream, WebsocketStream  socket error"),postMessage({cmd:E,type:"websocketError",value:e.toString()})},a.onmessage=e=>{s(e.data.byteLength);const t=new DataView(e.data),r=(t.getUint8(0),t.getUint32(1,!1));switch(n){case 1:const n=new Uint8Array(e.data,5);m.decode(n,{type:1,ts:r});break;case 2:if(5<t.byteLength){const n=new Uint8Array(e.data,5),o=t.getUint8(5)>>4==1;m.opt.debug&&console.log("Jessibuca: [worker]: fetchStream, onmessage video isIFrame is",o),m.decode(n,{type:2,ts:r,isIFrame:o})}}})},demuxFlv:function*(){yield 9;const t=new ArrayBuffer(4),r=new Uint8Array(t),n=new Uint32Array(t);for(;;){r[3]=0;const t=yield 15,a=t[4];r[0]=t[7],r[1]=t[6],r[2]=t[5];var o=n[0];r[0]=t[10],r[1]=t[9],r[2]=t[8];let e=n[0];16777215===e&&(r[3]=t[11],e=n[0]);var i=(yield o).slice();switch(a){case 8:m.decode(i,{type:1,ts:e});break;case 9:const t=i[0]>>4==1;0<i.byteLength&&m.decode(i,{type:2,ts:e,isIFrame:t})}}},decode:function(e,t){var r=m.opt.playType;1===t.type?m.opt.hasAudio&&(postMessage({cmd:E,type:"streamAbps",value:e.byteLength}),r===f?m.pushBuffer(e,{type:t.type,ts:t.ts}):r===p&&u.decode(e,t.ts)):2===t.type&&(postMessage({cmd:E,type:"streamVbps",value:e.byteLength}),r===f?m.pushBuffer(e,{type:t.type,ts:t.ts,isIFrame:t.isIFrame}):r===p&&c.decode(e,t.ts))}}),u=new g.AudioDecoder(m),c=new g.VideoDecoder(m);postMessage({cmd:b.init}),self.onmessage=function(e){var t=e.data;switch(t.cmd){case b.init:try{m.opt=Object.assign(m.opt,JSON.parse(t.opt))}catch(e){}u.sample_rate=t.sampleRate,m.init();break;case b.decode:m.pushBuffer(t.buffer,t.options);break;case b.audioDecode:u.decode(t.buffer,t.ts);break;case b.videoDecode:c.decode(t.buffer,t.ts);break;case b.fetchStream:m.fetchStream(t.url,JSON.parse(t.opt));break;case b.close:m.close();break;case b.updateConfig:m.opt[t.key]=t.value}}}});
